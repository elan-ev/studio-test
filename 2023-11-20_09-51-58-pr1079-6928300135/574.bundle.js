"use strict";(self.webpackChunkopencast_studio=self.webpackChunkopencast_studio||[]).push([[574],{574:function(e,t,r){r.r(t),r.d(t,{App:function(){return cn}});var n,i,o=r(6818),s=r(5951),a=r(917),l=r(7294),d=r(6893),c=r(1072);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}var p,h=e=>l.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"step-current_svg__feather step-current_svg__feather-circle",viewBox:"0 0 24 24"},e),n||(n=l.createElement("circle",{cx:12,cy:12,r:10})),i||(i=l.createElement("circle",{cx:12,cy:12,r:3,fill:"currentColor"})));function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}var m=e=>l.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",className:"step-done_svg__feather step-done_svg__feather-circle",viewBox:"0 0 24 24"},e),p||(p=l.createElement("path",{d:"M12 1A11 11 0 0 0 1 12a11 11 0 0 0 11 11 11 11 0 0 0 11-11A11 11 0 0 0 12 1zm5 7a1 1 0 0 1 .707.293 1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414 0l-3-3a1 1 0 0 1 0-1.414 1 1 0 0 1 1.414 0L10 14.586l6.293-6.293A1 1 0 0 1 17 8z"}))),v=r(6285),f=r(3403);const b=(e,t,r)=>{const n=e&&{max:e},i=("number"==typeof t?.height?t.height:t.height?.ideal)??r;return{height:{...n,...i&&(e?{ideal:Math.min(i,e)}:{ideal:i})}}};async function x(e,t){try{const r=await navigator.mediaDevices.getUserMedia({audio:!t||{deviceId:t},video:!1});r.getTracks().forEach((t=>{t.onended=()=>{e({type:"AUDIO_UNEXPECTED_END"})}})),e({type:"SHARE_AUDIO",stream:r})}catch(t){console.error("Error: "+t),e({type:"BLOCK_AUDIO"})}}async function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=t.display?.maxFps?{frameRate:{max:t.display.maxFps}}:{},i=b(t.display?.maxHeight,r),o={video:{cursor:"always",...n,...r,...i},audio:!0};try{const t=await navigator.mediaDevices.getDisplayMedia(o);t.getTracks().forEach((t=>{t.onended=()=>{e({type:"DISPLAY_UNEXPECTED_END"})}})),e({type:"SHARE_DISPLAY",stream:t})}catch(t){console.error("Error: "+t),e({type:"BLOCK_DISPLAY"})}}async function y(e,t,r){const n=t.camera?.maxFps?{frameRate:{max:t.camera.maxFps}}:{},i=b(t.camera?.maxHeight,r,1080),o={video:{facingMode:"user",...r,...n,...i},audio:!1};try{const t=await navigator.mediaDevices.getUserMedia(o);t.getTracks().forEach((t=>{t.onended=()=>{e({type:"USER_UNEXPECTED_END"})}})),e({type:"SHARE_USER",stream:t})}catch(t){console.error("Error: "+t),e({type:"BLOCK_USER"})}}function Z(e,t){e?.getTracks().forEach((e=>e.stop())),t({type:"UNSHARE_AUDIO"})}function D(e,t){e?.getTracks().forEach((e=>e.stop())),t({type:"UNSHARE_DISPLAY"})}function k(e,t){e?.getTracks().forEach((e=>e.stop())),t({type:"UNSHARE_USER"})}var S=r(8107),M=r.n(S),C=r(4063),E=r.n(C),R=r(5944);const B=l.createContext(null),T=()=>(0,v.eU)(B,"useVideoBoxResize"),$=e=>{let{gap:t=0,minWidth:r=180,minHeight:n=140,children:i}=e;const{ref:s,width:d=1,height:c=1}=M()(),[,u]=(0,l.useState)(0),p=(0,l.useRef)(i.map((()=>null))),h=e=>{e.forEach(((e,t)=>{e&&(p.current[t]=e)}))};let g=i.map((e=>e.dimensions()));h(g);const m=()=>{const e=i.map((e=>e.dimensions()));E()(e,g)||(g=e,h(g),u((e=>e+1)))},v=e=>null==e?16/9:e[0]/e[1];switch(i.length){case 1:{const e=i[0],t=v(p.current[0]);let o,l;return d>c*t?(l=c,o=c*t):(o=d,l=d/t),(0,R.tZ)(B.Provider,{value:m,children:(0,R.tZ)("div",{ref:s,css:(0,a.iv)({flex:"1 0 0",minHeight:n,display:"flex"},"",""),children:(0,R.tZ)("div",{css:(0,a.iv)({...!e.autoSize&&{height:l,width:o},minWidth:`${r}px`,margin:"auto"},"",""),children:e.body})})})}case 2:{const e=p.current.map((e=>v(e))),{rowWidths:o,rowHeights:l}=(()=>{const r=d-t,n=e[0]+e[1];if(r>c*n)return{rowHeights:Array(2).fill(c),rowWidths:e.map((e=>c*e))};{const t=r/n;return{rowHeights:i.map((()=>t)),rowWidths:e.map((e=>t*e))}}})(),{colWidths:u,colHeights:h}=(()=>{const r=c-t,n=1/(1/e[0]+1/e[1]);if(d>r*n){const t=r*n;return{colHeights:i.map(((r,n)=>t/e[n])),colWidths:Array(2).fill(t)}}return{colHeights:i.map(((t,r)=>d/e[r])),colWidths:Array(2).fill(d)}})();let g,f,b;return o[0]*l[0]+o[1]*l[1]>u[0]*h[0]+u[1]*h[1]?(b="row",g=o,f=l):(b="column",g=u,f=h),(0,R.tZ)(B.Provider,{value:m,children:(0,R.BX)("div",{ref:s,css:(0,a.iv)({flex:"1 0 0",display:"flex",gap:t,flexDirection:b,justifyContent:"space-between",minHeight:n},"",""),children:[(0,R.tZ)("div",{css:(0,a.iv)({...!i[0].autoSize&&{height:f[0],width:g[0]},minWidth:`${r}px`,margin:"auto"},"",""),children:i[0].body}),(0,R.tZ)("div",{css:(0,a.iv)({...!i[1].autoSize&&{height:f[1],width:g[1]},minWidth:`${r}px`,margin:"auto"},"",""),children:i[1].body})]})})}default:return(0,o.jI)("Internal error: too few or too many video streams")}};var I={name:"1eeok3z",styles:"display:block;font-size:17px;margin-bottom:8px"},L={name:"b1vrpl",styles:"font-size:15px;max-width:100ch"},j={name:"1t84eec",styles:"font-size:15px;max-width:100ch;margin-top:8px"};const z=e=>{let{title:t,body:r,extraBody:n,...i}=e;return(0,R.BX)("div",{"aria-live":"polite",css:(0,a.iv)({padding:"16px 22px",margin:12,borderRadius:8,backgroundColor:v.DM.danger1,color:v.DM.danger5},"",""),...i,children:[t&&(0,R.tZ)("strong",{css:I,children:t}),(0,R.tZ)("div",{css:L,children:r}),n&&(0,R.tZ)("div",{css:j,children:n})]})};var X=r(570);const A=l.forwardRef(((e,t)=>(0,R.tZ)("select",{ref:t,...e,css:(0,a.iv)({position:"relative",borderRadius:6,padding:"6px 12px",paddingRight:32,backgroundColor:"transparent",border:`1px solid ${v.DM.neutral25}`,appearance:"none",background:`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='2' height='1' fill='${"light"===(0,o.J1)().scheme?"%23555":"%23aaa"}'><polygon points='0,0 2,0 1,1'/></svg>") no-repeat`,backgroundSize:12,backgroundPosition:"calc(100% - 12px) center",option:{backgroundColor:v.DM.neutral05,color:v.DM.neutral90},...(0,v.jq)({offset:-1})},"",""),children:e.children}))),O=function(e){return{..."deviceId"in e&&{deviceId:{[arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"exact":"ideal"]:e.deviceId}},..."aspectRatio"in e&&{aspectRatio:{ideal:e.aspectRatio?P(e.aspectRatio):void 0}},..."quality"in e&&{height:{ideal:e.quality?U(e.quality):void 0}}}},H=["4:3","16:9"],P=e=>({"4:3":4/3,"16:9":16/9}[e]??void 0),U=e=>{if(/^[0-9]+p$/.test(e))return parseInt(e)},_="ocStudioLastVideoDevice",W="ocStudioCameraAspectRatio",q="ocStudioCameraQuality",N="ocStudioDisplayQuality",G=()=>({deviceId:window.localStorage.getItem(_)??void 0,aspectRatio:window.localStorage.getItem(W)||"auto",quality:window.localStorage.getItem(q)||"auto"}),F=()=>({quality:window.localStorage.getItem(N)||"auto"});var J={name:"1v2iei1",styles:"position:absolute;right:8px;bottom:8px"},V={name:"13h0jku",styles:"max-width:min(670px, 100vw - 16px)"};const Y=e=>{let{isDesktop:t,stream:r}=e;const n=(0,f.I0)(),i=(0,X.rV)(),s=(0,l.useRef)(null),{t:u}=(0,c.$G)(),p="light"===(0,o.J1)().scheme,{isHighContrast:h}=(0,o.J1)(),g=t?F():G(),m=e=>{const o={...g,...e},s=O(o,!0),a=(e,t)=>{null!=t&&window.localStorage.setItem(e,t)};t?(a(N,o.quality),D(r,n),w(n,i,s)):(a(_,o.deviceId),a(W,o.aspectRatio),a(q,o.quality),k(r,n),y(n,i,s))};(0,l.useEffect)((()=>{const e=se(r);!t&&e&&window.localStorage.setItem(_,e)}));const[b,x]=(0,l.useState)(!1),Z=u("steps.video.video-settings-"+(b?"close":"open"));return(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{css:(0,a.iv)({display:b?"initial":"none",position:"absolute",top:12,left:0,right:0,textAlign:"center"},"",""),children:(0,R.tZ)("span",{css:(0,a.iv)({color:p?v.DM.neutral70:v.DM.neutral90,backgroundColor:v.DM.neutral05,borderRadius:"10px",padding:"4px 8px",boxShadow:h?"none":"0 0 12px rgba(0, 0, 0, 30%)"},"",""),children:Q(r)})}),(0,R.BX)(o.s6,{ref:s,placement:"top-end",ariaRole:"dialog",open:b,onClose:()=>x(!1),borderRadius:8,viewPortMargin:8,css:J,children:[(0,R.tZ)(o.Lm,{children:(0,R.tZ)(o.Rl,{placement:"bottom",tooltip:Z,children:(0,R.tZ)(o.Wg,{onClick:()=>x((e=>!e)),"aria-label":Z,css:(0,a.iv)({border:"none",display:"inline-block",backgroundColor:"rgba(0, 0, 0, 0.3)",color:"white",padding:8,fontSize:26,backdropFilter:"invert(0.3) blur(4px)",lineHeight:0,borderRadius:"10px",cursor:"pointer","&:hover, &:focus-visible":{backgroundColor:"rgba(0, 0, 0, 0.5)"},"> svg":{transition:"transform 0.2s"},"&:hover > svg, &:focus > svg":{transform:b?"none":"rotate(45deg)"},"&:focus-visible":{outline:"5px dashed white",outlineOffset:-2.5}},"",""),children:b?(0,R.tZ)(d.q5L,{}):(0,R.tZ)(d.nbt,{})})})}),(0,R.BX)(o.fs,{css:V,borderWidth:p?0:1,shadowBlur:16,padding:18,children:[(0,R.BX)("div",{css:(0,a.iv)({display:"grid",width:"100%",gridTemplateColumns:"auto 1fr",gridGap:"14px 32px",paddingLeft:4,[(0,o.xf)(450)]:{columnGap:8},[(0,o.xf)(360)]:{gridTemplateColumns:"1fr",rowGap:0},fontSize:14,"@media (min-width: 420px) and (min-height: 440px)":{fontSize:16}},"",""),children:[!t&&(0,R.tZ)(ie,{updatePrefs:m,prefs:g,isExpanded:b}),(0,R.tZ)(re,{isDesktop:t,updatePrefs:m,prefs:g,stream:r,settings:i,isExpanded:b})]}),(0,R.tZ)("div",{css:(0,a.iv)({backgroundColor:v.DM.neutral15,marginTop:8,padding:"8px 12px",fontSize:12,lineHeight:1.25,borderRadius:6,"@media (min-width: 420px) and (min-height: 440px)":{fontSize:14}},"",""),children:(0,R.BX)(c.cC,{i18nKey:"steps.video.preferences-note",children:[(0,R.tZ)("strong",{children:"Note:"})," Explanation."]})})]})]})]})},Q=e=>{const t=e?.getVideoTracks()?.[0]?.getSettings(),r=t&&t.width&&t.height?`${t.width}×${t.height}`:"",n=t&&t.frameRate?`${t.frameRate} fps`:"";return t?[r,n].join(", "):"..."},K=e=>{let{children:t}=e;return(0,R.tZ)("div",{css:(0,a.iv)({display:"flex",flexDirection:"column",justifyContent:"center",[(0,o.xf)(360)]:{marginTop:4}},"",""),children:t})};var ee={name:"1uqn15b",styles:"display:flex;flex-wrap:wrap;gap:6px"};const te=e=>{let{children:t}=e;return(0,R.tZ)("div",{css:ee,children:t})},re=e=>{let{isDesktop:t,updatePrefs:r,prefs:n,settings:i}=e;const{t:o}=(0,c.$G)(),s=e=>r({quality:e}),a=(e=>{const t=[360,480,720,1080,1440,2160].filter((t=>!e||t<=e));return!e||0!==t.length&&t[t.length-1]===e||t.push(e),t.map((e=>`${e}p`))})(t?i.display?.maxHeight:i.camera?.maxHeight),l=t?"desktop":"user";return(0,R.BX)(R.HY,{children:[(0,R.tZ)(K,{children:o("steps.video.quality")}),(0,R.BX)(te,{children:[(0,R.tZ)(oe,{id:`quality-auto-${l}`,value:"auto",name:`quality-${l}`,label:o("steps.video.quality-auto"),onChange:s,checked:a.every((e=>n.quality!==e))}),a.map((e=>(0,R.tZ)(oe,{id:`quality-${e}-${l}`,value:e,name:`quality-${l}`,onChange:s,checked:n.quality===e},`${e}-${l}`)))]})]})};var ne={name:"1d3w5wq",styles:"width:100%"};const ie=e=>{let{updatePrefs:t,prefs:r}=e;const{t:n}=(0,c.$G)(),i=(0,f.fd)(),o=se(i.userStream),s=(0,v.Mz)(i.mediaDevices,"videoinput"),a=e=>t({aspectRatio:e});return(0,R.BX)(R.HY,{children:[(0,R.tZ)(K,{children:(0,R.tZ)("label",{htmlFor:"sources-video-device",children:n("steps.video.device")})}),(0,R.tZ)(te,{children:(0,R.tZ)(A,{id:"sources-video-device",value:o,onChange:e=>{return r=e.target.value,t({deviceId:r});var r},css:ne,children:s.map((e=>(0,R.tZ)("option",{value:e.deviceId,children:e.label},e.deviceId)))})}),(0,R.tZ)(K,{children:n("steps.video.aspect-ratio")}),(0,R.BX)(te,{children:[(0,R.tZ)(oe,{id:"ar-auto",value:"auto",name:"aspectRatio",label:n("steps.video.aspect-ratio-auto"),onChange:a,checked:H.every((e=>r.aspectRatio!==e))}),H.map((e=>(0,R.tZ)(oe,{id:`ar-${e}`,value:e,name:"aspectRatio",onChange:a,checked:r.aspectRatio===e},e)))]})]})},oe=e=>{let{id:t,value:r,checked:n,name:i,onChange:s,label:l}=e;const{isHighContrast:d}=(0,o.J1)();return(0,R.BX)("div",{children:[(0,R.tZ)("input",{type:"radio",onChange:e=>s(e.target.value),id:t,value:r,checked:n,name:i,css:(0,a.iv)({display:"none","&+label":{display:"block",border:`1px solid ${v.DM.neutral25}`,lineHeight:1.2,padding:"4px 10px",borderRadius:6,fontWeight:500,cursor:"pointer",":hover":{backgroundColor:v.DM.neutral10,borderColor:v.DM.neutral40,...d&&{outline:`2px solid ${v.DM.accent4}`,borderColor:"transparent"}}},"&:checked+label":{backgroundColor:v.DM.accent6,borderColor:v.DM.accent6,color:v.DM.neutral05,cursor:"default"}},"","")}),(0,R.tZ)("label",{tabIndex:0,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&s(r),htmlFor:t,children:l??r})]})},se=e=>e?.getVideoTracks()?.[0]?.getSettings()?.deviceId,ae=e=>{let{inputs:t}=e;const r=(0,o.EQ)(t.length,{1:()=>[{body:(0,R.tZ)(de,{input:t[0]}),dimensions:()=>(0,v.Ld)(t[0].stream),autoSize:le(t[0])}],2:()=>[{body:(0,R.tZ)(de,{input:t[0]}),dimensions:()=>(0,v.Ld)(t[0].stream),autoSize:le(t[0])},{body:(0,R.tZ)(de,{input:t[1]}),dimensions:()=>(0,v.Ld)(t[1].stream),autoSize:le(t[1])}]},o.t1);return(0,R.tZ)($,{gap:20,children:r})},le=e=>!1===e.allowed||!!e.unexpectedEnd,de=e=>{let{input:t}=e;const{isHighContrast:r}=(0,o.J1)();return(0,R.BX)("div",{css:(0,a.iv)({height:"100%",backgroundColor:v.DM.neutral05,borderRadius:12,position:"relative",...!le(t)&&{boxShadow:r?"none":"0 6px 16px rgba(0, 0, 0, 0.2)"},...r&&{outline:`1px solid ${v.DM.neutral90}`}},"",""),children:[(0,R.tZ)(ve,{input:t}),t.stream&&(0,R.BX)(R.HY,{children:[t.isDesktop&&(0,R.tZ)(be,{stream:t.stream}),(0,R.tZ)(Y,{isDesktop:t.isDesktop,stream:t.stream})]})]})};var ce={name:"ti75j2",styles:"margin:0"},ue={name:"ti75j2",styles:"margin:0"},pe={name:"10jtkcq",styles:"display:flex;flex-direction:column;width:100%;height:100%"},he={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},ge={name:"bjn8wh",styles:"position:relative"},me={name:"480t9l",styles:"min-height:0;display:block;width:100%;height:100%;border-radius:12px"};const ve=e=>{let{input:t}=e;const{t:r}=(0,c.$G)(),{allowed:n,stream:i,unexpectedEnd:s}=t,d=T(),u=(0,l.useRef)(null);if((0,l.useEffect)((()=>{const e=u.current;return e&&(e.srcObject||(e.srcObject=i),e.addEventListener("resize",d)),()=>{e&&e.removeEventListener("resize",d)}}),[i,d]),!i){let e;return e=!1===n||s?(0,R.BX)("div",{children:[!1===n&&(0,R.tZ)(z,{css:ce,title:r(`steps.video.${t.isDesktop?"display":"user"}-not-allowed-title`),body:r(`steps.video.${t.isDesktop?"display":"user"}-not-allowed-text`)}),s&&(0,R.tZ)(z,{css:ue,body:r("error-lost-video-stream")})]}):(0,R.tZ)(o.$j,{size:75,css:(0,a.iv)({color:v.DM.neutral60},"","")}),(0,R.tZ)("div",{css:pe,children:(0,R.tZ)("div",{css:he,children:e})})}return(0,R.tZ)("div",{css:ge,children:(0,R.tZ)("video",{ref:u,autoPlay:!0,muted:!0,playsInline:!0,css:me})})};var fe={name:"1kl2898",styles:"position:absolute;top:12px;right:12px;white-space:pre-line"};const be=e=>{let{stream:t}=e;const{t:r}=(0,c.$G)(),n=t.getAudioTracks().length;return(0,R.tZ)("div",{css:fe,children:(0,R.tZ)(o.Rl,{placement:"bottom",tooltip:r(n?"desktop-audio-info":"no-desktop-audio-info"),children:(0,R.BX)(o.Wg,{css:(0,a.iv)({display:"inline-block",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:5,padding:4,fontSize:15,backdropFilter:"invert(1)",lineHeight:0,cursor:"pointer","&:hover, &:focus-visible":{backgroundColor:"rgba(0, 0, 0, 0.9)"},"&:focus-visible":{outline:"5px dashed white",outlineOffset:-2.5}},"",""),children:[(0,R.tZ)(d.H33,{})," ",n?(0,R.tZ)(d.l3f,{}):(0,R.tZ)(d.LIZ,{})]})})})};var xe=r(1451),we=r(6977);const ye=()=>navigator.userAgent.includes("Mac"),Ze={general:{showAvailableShortcuts:"Alt; s",showOverview:"?",closeOverlay:"Escape",tab:"Tab",prev:ye()?"Shift+Mod+left":"Mod+left",next:ye()?"Shift+Mod+right":"Mod+right"},videoSetup:{selectScreen:"1",selectBoth:"2",selectUser:"3"},audioSetup:{withAudio:"1",withoutAudio:"2"},recording:{startPauseResume:"k; Space"},review:{playPause:"k; Space",forwards5secs:"l; right",backwards5secs:"j; left",forwardsFrame:".",backwardsFrame:",",cutLeft:"n",cutRight:"m",removeCutLeft:"Shift+n",removeCutRight:"Shift+m"},finish:{startNewRecording:"Shift+n",download:"d"}},De={general:{showAvailableShortcuts:"shortcuts.general.show-available-shortcuts",showOverview:"shortcuts.general.show-overview",closeOverlay:"shortcuts.general.close-overlay",tab:"shortcuts.general.tab-elements",prev:"shortcuts.general.back-button",next:"shortcuts.general.next-button"},videoSetup:{selectScreen:"shortcuts.select-video.select-display",selectBoth:"shortcuts.select-video.select-both",selectUser:"shortcuts.select-video.select-camera"},audioSetup:{withAudio:"shortcuts.select-audio.select-microphone",withoutAudio:"shortcuts.select-audio.select-no-audio"},recording:{startPauseResume:"shortcuts.record.start-pause-resume-recording"},review:{playPause:"shortcuts.review.play-pause",forwards5secs:"shortcuts.review.skip-five",backwards5secs:"shortcuts.review.back-five",forwardsFrame:"shortcuts.review.frame-forward",backwardsFrame:"shortcuts.review.frame-back",cutLeft:"shortcuts.review.cut-left",cutRight:"shortcuts.review.cut-right",removeCutLeft:"shortcuts.review.delete-left",removeCutRight:"shortcuts.review.delete-right"},finish:{startNewRecording:"shortcuts.finish.new-recording",download:"steps.finish.save-locally.label"}},ke={Escape:"escape",Space:"space",Shift:"shift",Alt:ye()?"option":"alt",Mod:ye()?"command":"control"},Se=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,we.y1)(e,t,{splitKey:";",...r},n)},Me=()=>{const[e,t]=(0,l.useState)(!1),r=e=>{Ze.general.showAvailableShortcuts.split(";").some((t=>t.trim().toLowerCase()==e.key.toLowerCase()))&&t(!0)},n=()=>t(!1);return(0,l.useEffect)((()=>(document.addEventListener("keydown",r),document.addEventListener("keyup",n),document.addEventListener("mousedown",n),window.addEventListener("blur",n),()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",n),document.removeEventListener("mousedown",n),window.removeEventListener("blur",n)}))),e},Ce=e=>{let{shortcut:t,large:r=!1}=e;const{t:n}=(0,c.$G)();return(0,R.tZ)("div",{css:(0,a.iv)({display:"flex",alignItems:"center",gap:4,color:v.DM.neutral70},"",""),children:t.split("+").map(((e,t)=>{let i=e;e in ke&&(i=n(`shortcuts.keys.${ke[e]}`));const s=(0,o.EQ)(e,{left:()=>(0,R.tZ)(d.Ao2,{title:i}),right:()=>(0,R.tZ)(d.Rgz,{title:i}),Mod:()=>ye()?(0,R.tZ)(d.zv2,{title:i}):(0,R.tZ)(R.HY,{children:i}),Alt:()=>ye()?(0,R.tZ)(xe.GmC,{title:i}):(0,R.tZ)(R.HY,{children:i}),Shift:()=>(0,R.tZ)(xe.TM5,{size:20,title:i})},(()=>(0,R.tZ)(R.HY,{children:i})));return(0,R.BX)(l.Fragment,{children:[0!==t&&"+",(0,R.tZ)(Ee,{large:r,monofont:"l"===e,children:s})]},t)}))})},Ee=e=>{let{large:t,monofont:r,children:n}=e;const i="light"===(0,o.J1)().scheme,{scheme:s,isHighContrast:l}=(0,o.J1)(),d=(0,o.EQ)(s,{light:()=>v.DM.neutral05,dark:()=>v.DM.neutral15,"light-high-contrast":()=>v.DM.neutral05,"dark-high-contrast":()=>v.DM.neutral15});return(0,R.tZ)("div",{css:(0,a.iv)({border:`1px solid ${v.DM.neutral50}`,borderRadius:4,padding:"2px 6px",display:"flex",alignItems:"center",justifyContent:"center",height:t?36:30,minWidth:t?36:30,fontSize:16,boxShadow:l?"none":"0 0 6px var(--shadow-color)",backgroundColor:t?d:v.DM.neutral10,color:l||i||!t?v.DM.neutral80:v.DM.neutral90,cursor:"default",...r&&{fontFamily:"monospace"}},"",""),children:n})},Re=e=>{let{close:t}=e;const{t:r}=(0,c.$G)();return(0,R.tZ)(sn,{maxWidth:1e3,close:t,title:r("shortcuts.label"),children:Object.entries(Ze).map((e=>{let[t,r]=e;return(0,R.tZ)(ze,{groupId:t,group:r},t)}))})},Be={general:"shortcuts.general.title",videoSetup:"steps.video.label",audioSetup:"steps.audio.label",recording:"steps.record.label",review:"steps.review.label",finish:"steps.finish.label"};var Te={name:"1b7dsph",styles:"margin:32px 0;:first-of-type{margin-top:16px;}"},$e={name:"35wqm0",styles:"font-size:18px;margin-bottom:8px"},Ie={name:"1hmse4r",styles:"display:flex;flex-wrap:wrap;gap:12px"},Le={name:"26bywx",styles:"overflow-wrap:anywhere"},je={name:"197tvr9",styles:"display:flex;gap:8px;align-items:center"};const ze=e=>{let{groupId:t,group:r}=e;const{t:n}=(0,c.$G)();return(0,R.BX)("section",{css:Te,children:[(0,R.tZ)("h2",{css:$e,children:n(Be[t])}),(0,R.tZ)("div",{css:Ie,children:Object.entries(r).map(((e,r)=>{let[i,s]=e;return(0,R.BX)("div",{css:(0,a.iv)({width:"calc(33.33% - 24px / 3)",[(0,o.xf)(1080)]:{width:"calc(50% - 12px / 2)"},[(0,o.xf)(720)]:{width:"100%"},backgroundColor:v.DM.neutral10,borderRadius:4,padding:"10px 16px",display:"inline-flex",flexDirection:"column",alignItems:"start",gap:8},"",""),children:[(0,R.tZ)("div",{css:Le,children:n(De[t][i])}),(0,R.tZ)("div",{css:je,children:s.split(";").map(((e,t)=>(0,R.BX)(l.Fragment,{children:[t>0&&n("shortcuts.sequence-seperator"),(0,R.tZ)(Ce,{shortcut:e.trim(),large:!0})]},t)))})]},r)}))})]})};var Xe={name:"0",styles:""},Ae={name:"iqv73y",styles:"border-radius:8px;margin:0;padding-left:0;overflow:hidden;list-style:none"};const Oe=e=>{let{kind:t,label:r,icon:n,disabled:i,danger:s,onClick:u,popoverEntries:p}=e;const{t:h}=(0,c.$G)(),g=Me(),m="dark"===(0,o.J1)().scheme,{isHighContrast:f}=(0,o.J1)(),b=(0,o.EQ)(t,{prev:()=>Ze.general.prev,next:()=>Ze.general.next}),[x,w]=(0,l.useState)(!1),y=p?()=>w((e=>!e)):()=>u?.();Se(b,y,{enabled:!i},[y,b,i]);const Z=(0,R.BX)(o.Wg,{disabled:i,onClick:y,css:(0,a.iv)({position:"relative",display:"flex",gap:8,alignItems:"center",lineHeight:1,...(0,v.jq)({offset:-1}),...s&&{"--color-focus":v.DM.danger4},borderRadius:8,border:`1px solid ${s?v.DM.danger4:v.DM.neutral50}`,color:s?v.DM.danger4:v.DM.neutral80,backgroundColor:s?v.DM.danger0:v.DM.neutral05,padding:"12px 24px",...(0,o.EQ)(t,{next:()=>({paddingRight:16}),prev:()=>({paddingLeft:16})}),'&[data-floating-state="open"] svg':{transform:"rotate(-90deg)"},svg:{transition:"transform 0.15s",flexShrink:0},"&[disabled]":{color:v.DM.neutral60,borderColor:v.DM.neutral15,backgroundColor:v.DM.neutral15},"&:not([disabled]):hover, &:not([disabled]):focus-visible":{borderColor:s?v.DM.danger5:v.DM.neutral70,color:s?v.DM.danger5:v.DM.neutral90,boxShadow:f?"none":"0 0 8px var(--shadow-color)",...s&&{backgroundColor:v.DM.danger1},...f&&{outline:`2px solid ${s?v.DM.danger5:v.DM.accent4}`,borderColor:"transparent"}}},"",""),children:["prev"===t&&(n??(0,R.tZ)(d.YFh,{})),r??h(`steps.${"next"===t?"next":"back"}-button-label`),"next"===t&&(n??(0,R.tZ)(d.Tfp,{css:Xe})),g&&!i&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",top:-24,left:-6,padding:2,borderRadius:4,backgroundColor:v.DM.neutral05},"",""),children:(0,R.tZ)(Ce,{shortcut:b})})]});return p?(0,R.BX)(o.s6,{placement:"top-end",open:x,onClose:()=>w(!1),ariaRole:"menu",arrowSize:8,viewPortMargin:12,borderRadius:8,distance:6,children:[(0,R.tZ)(o.Lm,{children:Z}),(0,R.tZ)(o.fs,{backgroundColor:m?v.DM.neutral15:v.DM.neutral05,borderWidth:m?1:0,padding:0,shadowBlur:8,children:(0,R.tZ)("ul",{css:Ae,children:p?.map(((e,t)=>{const r={display:"flex",gap:16,alignItems:"center",width:"100%",minWidth:160,padding:12,color:v.DM.neutral80,cursor:"pointer",textDecoration:"none",...(0,v.jq)({inset:!0}),"& > svg":{maxHeight:23,fontSize:23,color:v.DM.neutral60,width:24,strokeWidth:2,"& > path":{strokeWidth:"inherit"}},":hover, :focus":{backgroundColor:v.DM.neutral10,color:"inherit"}};return(0,R.tZ)("li",{css:(0,a.iv)({":first-of-type > *":{borderRadius:"8px 8px 0 0"},":last-of-type> *":{borderRadius:"0 0 8px 8px"},":not(:first-of-type)":{borderTop:`1px solid ${v.DM.neutral30}`}},"",""),children:"href"in e?(0,R.BX)("a",{role:"button",href:e.href,css:r,onKeyDown:t=>{" "===t.key&&(t.preventDefault(),window.location.href=e.href)},children:[e.icon,e.label]}):(0,R.BX)(o.Wg,{onClick:e.onClick,css:r,children:[e.icon,e.label]})},t)}))})})]}):Z};var He={name:"1rx5t2m",styles:"flex:1;min-width:var(--min-page-width);display:flex;flex-direction:column;gap:12px;padding:12px;@media (min-width: 500px) and (min-height: 500px){gap:16px;padding:24px;}"},Pe={name:"xd9hir",styles:"flex:1;display:flex;flex-direction:column;justify-content:center;position:relative"},Ue={name:"1tn9h3w",styles:"display:flex;justify-content:end;align-items:end;gap:8px;min-height:42px"};const _e=e=>{let{title:t,note:r,nextButton:n,prevButton:i,children:o}=e;return(0,R.BX)("div",{css:He,children:[(0,R.BX)("div",{children:[(0,R.tZ)("h1",{"aria-live":"polite",css:(0,a.iv)({textAlign:"center",fontSize:32,fontWeight:700,color:v.DM.neutral70,"@media screen and (max-width: 600px), screen and (max-height: 400px)":{fontSize:26}},"",""),children:t}),r&&(0,R.tZ)("div",{css:(0,a.iv)({fontSize:14,color:v.DM.neutral60,textAlign:"center",lineHeight:1.3,maxWidth:"100ch",margin:"0 auto"},"",""),children:r})]}),(0,R.tZ)("div",{css:Pe,children:o}),(0,R.BX)("div",{css:Ue,children:[i&&(0,R.tZ)(Oe,{kind:"prev",...i}),n&&(0,R.tZ)(Oe,{kind:"next",...n})]})]})};var We={name:"1b63svt",styles:"font-size:18px;font-weight:700"},qe={name:"1m1e1pd",styles:"height:1lh;font-size:14px;margin-top:4px"},Ne={name:"1v2iei1",styles:"position:absolute;right:8px;bottom:8px"};const Ge=e=>{let{icon:t,label:r,onClick:n,shortcut:i,disabledText:s,ariaLabel:l}=e;const{isHighContrast:d}=(0,o.J1)();return(0,R.BX)(o.Wg,{onClick:n,disabled:!!s,"aria-label":l,css:(0,a.iv)({position:"relative",display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",maxHeight:250,maxWidth:420,padding:12,flex:"1",backgroundColor:v.DM.neutral05,color:v.DM.accent7,borderRadius:8,border:`1px solid ${v.DM.neutral20}`,"&[disabled]":{backgroundColor:v.DM.neutral10,color:v.DM.neutral50,borderColor:v.DM.neutral15},"&:not([disabled]):hover, &:not([disabled]):focus-visible":{color:v.DM.accent8,borderColor:v.DM.neutral30,boxShadow:"0 0 16px var(--shadow-color)",...d&&{outline:`2px solid ${v.DM.accent4}`,borderColor:"transparent",boxShadow:"none"}},...(0,v.jq)({offset:-1})},"",""),children:[(0,R.tZ)("div",{css:(0,a.iv)({borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:40,width:80,height:80,backgroundColor:v.DM.neutral10,marginBottom:8},"",""),children:t}),(0,R.tZ)("div",{css:We,children:r}),(0,R.tZ)("div",{css:qe,children:s}),i&&(0,R.tZ)("div",{css:Ne,children:(0,R.tZ)(Ce,{shortcut:i})})]})},Fe=e=>{let{setActiveSource:t,userConstraints:r,displayConstraints:n}=e;const{t:i}=(0,c.$G)(),s=(0,X.rV)(),l=(0,f.I0)(),u=(0,f.fd)(),{displaySupported:p,userSupported:h}=u,g=async()=>{t("user"),await y(l,s,r),await(0,v.NN)(l)},m=async()=>{t("display"),await w(l,s,n)},b=async()=>{t("both"),(0,v.H2)()?(await w(l,s,n),await y(l,s,r),await(0,v.NN)(l)):(await y(l,s,r),await Promise.all([(0,v.NN)(l),w(l,s,n)]))};Se(Ze.videoSetup.selectScreen,m),Se(Ze.videoSetup.selectBoth,b),Se(Ze.videoSetup.selectUser,g);const x=Me();return p||h?(0,R.BX)("div",{css:(0,a.iv)({display:"flex",gap:24,padding:8,justifyContent:"center",alignItems:"center",flex:"1",[(0,o.xf)(v.j$.medium)]:{flexDirection:"column"}},"",""),children:[(p||!(0,v.WK)())&&(0,R.tZ)(Ge,{label:i("sources-scenario-display"),ariaLabel:i("steps.video.share-display"),icon:(0,R.tZ)(d.hRw,{}),onClick:m,disabledText:!p&&i("steps.video.display-not-supported"),shortcut:x?Ze.videoSetup.selectScreen:void 0}),(p||!(0,v.WK)())&&h&&(0,R.tZ)(Ge,{label:i("sources-scenario-display-and-user"),ariaLabel:i("steps.video.share-display-and-user"),icon:(0,R.BX)("div",{css:(0,a.iv)({lineHeight:0,fontSize:"0.8em",svg:{strokeWidth:2.5}},"",""),children:[(0,R.tZ)(d.hRw,{}),(0,R.tZ)(d.fzv,{})]}),onClick:b,disabledText:p?!u.hasWebcam&&i("steps.video.no-cam-detected"):i("steps.video.display-not-supported"),shortcut:x?Ze.videoSetup.selectBoth:void 0}),h&&(0,R.tZ)(Ge,{label:i("sources-scenario-user"),ariaLabel:i("steps.video.share-user"),icon:(0,R.tZ)(d.fzv,{}),onClick:g,disabledText:!u.hasWebcam&&i("steps.video.no-cam-detected"),shortcut:x?Ze.videoSetup.selectUser:void 0})]}):(0,R.tZ)(z,{body:i("steps.video.none-available")})},Je=e=>{let{goToNextStep:t}=e;const{t:r}=(0,c.$G)(),n=(0,f.I0)(),i=(0,f.fd)(),{displayStream:s,userStream:a,videoChoice:l}=i,d=!!s||!!a,u=e=>n({type:"CHOOSE_VIDEO",choice:e}),p={isDesktop:!1,stream:a,allowed:i.userAllowed,unexpectedEnd:i.userUnexpectedEnd},h={isDesktop:!0,stream:s,allowed:i.displayAllowed,unexpectedEnd:i.displayUnexpectedEnd},g={prevButton:{onClick:()=>{u("none"),k(a,n),D(s,n)},disabled:!1,label:r("steps.video.reselect-source")},nextButton:{onClick:()=>t(),disabled:"both"===l?!s||!a:!d}},m=!1===i.userAllowed||i.userUnexpectedEnd||!1===i.displayAllowed||i.displayUnexpectedEnd;return(0,o.EQ)(l,{none:()=>(0,R.BX)(_e,{title:r("steps.video.question"),children:[(0,R.tZ)(Ve,{}),(0,R.tZ)(Fe,{displayConstraints:O(F()),userConstraints:O(G()),setActiveSource:u})]}),user:()=>{const e=a||m;return(0,R.tZ)(_e,{title:r("steps.video.user-selected"),...e&&g,children:(0,R.tZ)(ae,{inputs:[p]})})},display:()=>{const e=s||m;return(0,R.tZ)(_e,{title:r("steps.video.display-selected"),...e&&g,children:(0,R.tZ)(ae,{inputs:[h]})})},both:()=>{const e=a&&s||m;return(0,R.tZ)(_e,{title:r("steps.video.display-and-user-selected"),...e&&g,children:(0,R.tZ)(ae,{inputs:[h,p]})})}})},Ve=()=>{const{t:e}=(0,c.$G)(),t=[];if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&t.push((0,R.tZ)(z,{body:e("warning-https")})),!(0,v.UC)()){let r=e("warning-recorder-not-supported");(0,v.H2)()&&(r+=" "+e("warning-recorder-safari-hint")),t.push((0,R.tZ)(z,{body:r}))}return t.length>0?(0,R.tZ)("div",{children:t}):null},Ye=e=>{let{selectNoAudio:t,selectMicrophone:r}=e;const{t:n}=(0,c.$G)(),i=Me();return Se(Ze.audioSetup.withAudio,r),Se(Ze.audioSetup.withoutAudio,t),(0,R.BX)("div",{css:(0,a.iv)({display:"flex",gap:24,padding:8,justifyContent:"center",alignItems:"center",flex:"1",[(0,o.xf)(v.j$.medium)]:{flexDirection:"column"}},"",""),children:[(0,R.tZ)(Ge,{icon:(0,R.tZ)(d.dnc,{}),label:n("steps.audio.microphone"),onClick:r,shortcut:i?Ze.audioSetup.withAudio:void 0}),(0,R.tZ)(Ge,{icon:(0,R.tZ)(d.v1j,{}),label:n("steps.audio.without-audio"),onClick:t,shortcut:i?Ze.audioSetup.withoutAudio:void 0})]})};var Qe=r(3607),Ke=r.n(Qe),et={name:"nqgbks",styles:"display:flex;width:80%;min-width:240px;align-items:center"},tt={name:"102h2op",styles:"flex:1 1;min-width:50px"};const rt=()=>{const{t:e}=(0,c.$G)(),{isHighContrast:t}=(0,o.J1)(),r=(0,f.I0)(),n=(0,f.fd)(),{audioStream:i,audioAllowed:s,audioUnexpectedEnd:d}=n,u=i?.getAudioTracks()?.[0]?.getSettings()?.deviceId,p=(0,v.Mz)(n.mediaDevices,"audioinput");(0,l.useEffect)((()=>{u&&window.localStorage.setItem(ot,u)}));const h=(0,l.useId)();let g=(0,R.tZ)(R.HY,{});return g=i?(0,R.BX)(R.HY,{children:[(0,R.tZ)(it,{stream:i}),(0,R.BX)("div",{css:et,children:[(0,R.tZ)("label",{htmlFor:h,css:(0,a.iv)({marginRight:16,display:"flex",flexDirection:"column",alignItems:"center",fontWeight:700,color:v.DM.neutral70},"",""),children:e("steps.audio.device")}),(0,R.tZ)(A,{id:h,value:u,onChange:e=>(async e=>{i&&Z(i,r),await x(r,{exact:e})})(e.target.value),css:tt,children:p.map(((e,t)=>(0,R.tZ)("option",{value:e.deviceId,children:e.label??"unlabeled microphone"},t)))})]})]}):!1===s?(0,R.tZ)(z,{title:e("steps.audio.not-allowed-title"),body:e("steps.audio.not-allowed-text")}):!0===d?(0,R.tZ)(z,{body:e("error-lost-audio-stream")}):(0,R.tZ)(o.$j,{size:75}),(0,R.tZ)("div",{css:(0,a.iv)({maxWidth:850,backgroundColor:v.DM.neutral05,borderRadius:16,boxShadow:t?"none":"0 4px 16px var(--shadow-color)",width:"100%",margin:"0 auto",padding:24,display:"flex",flexDirection:"column",alignItems:"center",maxHeight:"400px",gap:16},"",""),children:g})};var nt={name:"1xnwbsu",styles:"width:100%;height:min(200px, 20vh);flex:1 0 70px"};const it=e=>{let{stream:t}=e;const r="dark"===(0,o.J1)().scheme,n=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=n.current;if(e){const n=e.getContext("2d");if(null==n)throw new Error("Could not get 2D context for canvas");n.lineWidth=2,n.strokeStyle=r?"#f1c40f":"#044a81";const i=(new window.AudioContext).createMediaStreamSource(t),o=new(Ke())(i,{fftSize:1024});return o.animate(n),()=>o.stop()}return()=>{}}),[t,r]),(0,R.tZ)("canvas",{ref:n,width:"800px",height:"200px",css:nt})},ot="ocStudioLastAudioDevice",st=e=>{let{goToNextStep:t,goToPrevStep:r}=e;const{t:n}=(0,c.$G)(),i=(0,f.I0)(),{audioStream:s,audioChoice:a}=(0,f.fd)();return(0,o.EQ)(a,{none:()=>(0,R.tZ)(_e,{title:n("steps.audio.question"),prevButton:{onClick:r},nextButton:{disabled:!0},children:(0,R.tZ)(Ye,{selectNoAudio:t,selectMicrophone:async()=>{i({type:"CHOOSE_AUDIO",choice:"microphone"});const e=window.localStorage.getItem(ot);await x(i,e?{ideal:e}:void 0),await(0,v.NN)(i)}})}),microphone:()=>(0,R.tZ)(_e,{title:n("steps.audio.microphone-selected"),prevButton:{label:n("steps.audio.reselect-audio"),onClick:()=>{s&&Z(s,i),i({type:"CHOOSE_AUDIO",choice:"none"})}},nextButton:{disabled:!s,onClick:t},children:(0,R.tZ)(rt,{})})})};var at=r(7210),lt={name:"158icaa",styles:"margin-left:4px"};const dt=e=>{let{recordingState:t,startRecording:r,pauseRecording:n,resumeRecording:i}=e;const{t:s}=(0,c.$G)(),l="light"===(0,o.J1)().scheme,{isHighContrast:u}=(0,o.J1)(),p=l?v.DM.neutral05:v.DM.neutral90,h=Me();Se(Ze.recording.startPauseResume,(()=>{(0,o.EQ)(t,{inactive:()=>r(),paused:()=>i(),recording:()=>n()})}),{ignoreEventWhen:e=>"Space"===e.code&&e.target instanceof HTMLButtonElement},[t]);const g=(0,o.EQ)(t,{inactive:()=>s("steps.record.record-button-title"),paused:()=>s("steps.record.resume-button-title"),recording:()=>s("steps.record.pause-button-title")});return(0,R.BX)("div",{css:(0,a.iv)({margin:"0 auto",width:180,height:85,display:"flex",gap:32,alignItems:"center",justifyContent:"center",backgroundColor:l?v.DM.neutral70:v.DM.neutral05,border:`1px solid ${l?v.DM.neutral50:v.DM.neutral25}`,boxShadow:u?"none":"0 4px 16px rgba(0, 0, 0, 0.2)",borderRadius:12,color:p,...u&&{backgroundColor:v.DM.neutral05,border:`2px solid ${v.DM.neutral25}`}},"",""),children:[(0,R.tZ)(o.Rl,{tooltip:g,children:(0,R.BX)("button",{onClick:(0,o.EQ)(t,{inactive:()=>r,paused:()=>i,recording:()=>n}),"aria-label":g,"aria-live":"polite",css:(0,a.iv)({position:"relative",width:50,height:50,display:"flex",justifyContent:"center",alignItems:"center",fontSize:28,padding:0,boxShadow:u?"none":"0 4px 4px rgba(0, 0, 0, 0.12)",cursor:"pointer",color:u||l?"white":"#D6D6D6",borderRadius:"50%",backgroundColor:l?"#E42D43":"#b8012d",border:`${u?"2px":"1px"} solid ${p}`,":hover, :focus-visible":{backgroundColor:l?"#c40a31":"#8f0121"},":focus-visible":{outline:`4px solid ${p}`}},"",""),children:[(0,o.EQ)(t,{inactive:()=>null,paused:()=>(0,R.tZ)(d.KCr,{css:lt}),recording:()=>(0,R.tZ)(d.R4s,{})}),h&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",right:-4,bottom:-4},"",""),children:(0,R.tZ)(Ce,{shortcut:Ze.recording.startPauseResume.split(";")[0]})})]})}),(0,R.tZ)(ct,{isRecording:"recording"===t})]})},ct=e=>{let{isRecording:t}=e;const[r,n]=(0,l.useState)("00:00"),i=(0,l.useRef)(0);return(0,l.useEffect)((()=>{let e=new Date;const r=setInterval((()=>{const r=new Date;if(t){i.current+=r.valueOf()-e.valueOf();const t=i.current;let o=[Math.floor(t/36e5),Math.floor(t/6e4)%60,Math.floor(t/1e3)%60];0===o[0]&&(o=o.slice(1)),n(o.map((e=>(e<10?"0":"")+e)).join(":"))}e=r}),100);return()=>clearInterval(r)}),[t]),(0,R.tZ)("div",{children:r})};class ut{#e;#t=[];#r;onStop;constructor(e,t,r){let n;"isTypeSupported"in MediaRecorder?(n=(t?.mimes||[]).find((e=>MediaRecorder.isTypeSupported(e))),n?console.debug("using first supported MIME type from settings: ",n):t?.mimes&&console.debug("None of the MIME types specified in settings are supported by this `MediaRecorder`")):t?.mimes&&console.debug("MIME types were specified, but `MediaRecorder.isTypeSupported` is not supported by your browser"),this.#n(),this.#r=(0,v.Ld)(e),this.onStop=r;const i=t?.videoBitrate;this.#e=new MediaRecorder(e,{mimeType:n,videoBitsPerSecond:i}),this.#e.ondataavailable=this.#i,this.#e.onstop=this.#o}#n=()=>{this.#t=[]};#i=e=>{e.data.size>0?this.#t.push(e.data):console.log("Recording data has size 0!",e)};#o=e=>{const t=this.#t[0]?.type||this.#e.mimeType,r=new Blob(this.#t,{type:t}),n=URL.createObjectURL(r);this.#n(),this.onStop?.({url:n,media:r,mimeType:t,dimensions:this.#r})};start(){this.#e.start()}pause(){this.#e.pause()}resume(){this.#e.resume()}stop(){this.#e.stop()}}const pt=(e,t)=>r=>{let{media:n,url:i,mimeType:o,dimensions:s}=r;e({type:"ADD_RECORDING",recording:{deviceType:t,media:n,url:i,mimeType:o,dimensions:s}})},ht=(e,t)=>e.reduce(((e,t)=>t?.getAudioTracks().length?new MediaStream([...e.getVideoTracks(),...(e.getAudioTracks().length?(()=>{const r=new AudioContext,n=r.createMediaStreamSource(e),i=r.createMediaStreamSource(t),o=r.createMediaStreamDestination();return n.connect(o),i.connect(o),o.stream})():t).getAudioTracks()]):e),t);var gt={name:"1co8040",styles:"position:absolute;bottom:32px;width:100%"};const mt=e=>{let{goToNextStep:t,goToPrevStep:r}=e;const{t:n}=(0,c.$G)(),i=(0,f.I0)(),o=(0,at.mx)(),a=(0,f.I0)(),d=(0,X.rV)(),u=(0,f.fd)(),{displayStream:p,userStream:h,displayUnexpectedEnd:g,userUnexpectedEnd:m,audioUnexpectedEnd:b}=u,[x,w]=(0,l.useState)("inactive"),y=(0,l.useRef)(),S=(0,l.useRef)(),M=(p||h)&&!m&&!g&&!b,C=e=>{y.current?.stop(),S.current?.stop(),a({type:e?"STOP_RECORDING_PREMATURELY":"STOP_RECORDING"}),o.refreshConnection(),function(e,t){let{audioStream:r,displayStream:n,userStream:i}=e;Z(r,t),D(n,t),k(i,t)}(u,i),t()};(0,l.useEffect)((()=>{!(m||g||b)||"recording"!==x&&"paused"!==x||C(!0)}));const E="paused"===x,B=[];return(p||g)&&B.push({body:(0,R.tZ)(bt,{stream:p,paused:E}),dimensions:()=>(0,v.Ld)(p),autoSize:!p}),(h||m)&&B.push({body:(0,R.tZ)(bt,{stream:h,paused:E}),dimensions:()=>(0,v.Ld)(h),autoSize:!h}),(0,s.x)((e=>{"inactive"!==x&&e.preventDefault()})),(0,R.BX)(_e,{title:n("steps.record.label"),prevButton:{onClick:r,disabled:"inactive"!==x},nextButton:{onClick:()=>C(!1),disabled:"paused"!==x,label:n("steps.record.stop-button-title")},children:[b&&(0,R.tZ)(z,{body:n("error-lost-audio-stream")}),(0,R.tZ)($,{gap:20,children:B}),(0,R.tZ)("div",{css:gt,children:M&&(0,R.tZ)(dt,{startRecording:()=>{if(a({type:"CLEAR_RECORDINGS"}),p){const e=pt(a,"desktop"),t=ht([u.audioStream],p);y.current=new ut(t,d.recording,e),y.current.start()}if(h){const e=pt(a,"video"),t=ht([u.audioStream,p],h);S.current=new ut(t,d.recording,e),S.current.start()}w("recording"),a({type:"START_RECORDING"})},pauseRecording:()=>{w("paused"),y.current?.pause(),S.current?.pause()},resumeRecording:()=>{w("recording"),y.current?.resume(),S.current?.resume()},recordingState:x})})]})};var vt={name:"ti75j2",styles:"margin:0"},ft={name:"1ujvmfg",styles:"outline:none;width:100%;height:100%;background:transparent"};const bt=e=>{let{stream:t,paused:r}=e;const{t:n}=(0,c.$G)(),i=T(),s=(0,l.useRef)(null),{isHighContrast:d}=(0,o.J1)();return(0,l.useEffect)((()=>{const e=s.current;if(e&&t)return e.srcObject||(e.srcObject=t),e.addEventListener("resize",i),r?e.pause():e.play(),()=>e.removeEventListener("resize",i)})),t?(0,R.BX)("div",{css:(0,a.iv)({position:"relative",boxShadow:d?"none":"0 2px 12px rgba(0, 0, 0, 0.35)",overflow:"hidden",height:"100%"},"",""),children:[r&&(0,R.tZ)(yt,{}),(0,R.tZ)("video",{ref:s,autoPlay:!0,muted:!0,playsInline:!0,tabIndex:-1,css:ft})]}):(0,R.tZ)(z,{css:vt,body:n("error-lost-video-stream")})};var xt={name:"1b4lm15",styles:"position:absolute;width:100%;height:100%;background-color:rgba(50, 50, 50, 0.7)"},wt={name:"4t4ja4",styles:"font-size:26px"};const yt=()=>{const{t:e}=(0,c.$G)();return(0,R.tZ)("div",{css:xt,children:(0,R.BX)("div",{css:(0,a.iv)({display:"flex",alignItems:"center",justifyContent:"center",color:"white",gap:8,fontSize:20,marginTop:32,textShadow:"0 0 12px rgba(0, 0, 0, 0.6)",animation:`2s ease-in-out infinite none ${(0,a.F4)({"0%":{opacity:1},"50%":{opacity:.7},"100%":{opacity:1}})}`},"",""),children:[(0,R.tZ)(d.rOP,{css:wt}),e("steps.record.is-paused")]})})};var Zt;function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(this,arguments)}var kt,St=e=>l.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 100 90",width:"1em",height:"1em"},e),Zt||(Zt=l.createElement("g",{fill:"currentColor"},l.createElement("path",{d:"M49.7.002c-2.91.059-5.75 1.49-7.44 4.08a8.837 8.837 0 0 0-1.42 5.29c-.08.122-.986 1.51-1.13 1.72-.13-.2-.997-1.54-1.08-1.66a8.838 8.838 0 0 0-1.4-5.29c-1.68-2.59-4.51-4.04-7.42-4.11a9.028 9.028 0 0 0-5.09 1.41c-4.18 2.66-5.4 8.27-2.72 12.4 2.56 3.96 7.83 5.24 11.9 3.02l.992 1.53c-2.84 4.35-4.9 7.5-6.74 10.3-3.09 4.73-1.94 8.93 2.01 11.5l9.47-14.5 9.45 14.6c3.96-2.55 5.13-6.75 2.06-11.5-1.84-2.84-3.9-6.03-6.74-10.4l1.04-1.59c4.1 2.23 9.37.974 12-2.97 2.03-3.1 1.85-7.03-.114-9.93a8.883 8.883 0 0 0-2.55-2.49 8.938 8.938 0 0 0-5.08-1.43zm.09 5.96a3.038 3.038 0 0 1 1.7.499c.357.23.65.514.872.835.668.962.712 2.24.018 3.31-.926 1.42-2.74 1.8-4.17.882-1.43-.92-1.82-2.73-.89-4.14.58-.886 1.51-1.37 2.47-1.38zm-20.1.023c.963.017 1.89.504 2.46 1.39.92 1.42.525 3.22-.906 4.14s-3.25.521-4.17-.9c-.92-1.42-.525-3.22.906-4.14a3.07 3.07 0 0 1 1.71-.492zm10 24.1a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm0 10.9a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm-1.5 8.8a2.43 2.42 0 0 0-2.43 2.42v35.4a2.43 2.42 0 0 0 2.43 2.42h8.94v-4.83h-6.51v-30.6h6.1v-4.83zm6.51 8.86v22.5h55.2v-4.83h-3.22a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.767-1.71 1.72-1.71h3.22v-4.83zm6.59 4.83h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.767 1.71-1.72 1.71h-14.4a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.767-1.71 1.72-1.71zm22.7 0h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.767 1.71-1.72 1.71h-14.4a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.77-1.71 1.72-1.71z"}),l.createElement("path",{d:"M0 58.6v4.83h2.44c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.768 1.71-1.72 1.71H0v4.83h31.8v-22.5zm10.8 4.83h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.768 1.71-1.72 1.71H10.8a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.768-1.71 1.72-1.71z",opacity:.2}))));function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}var Ct=e=>l.createElement("svg",Mt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),kt||(kt=l.createElement("path",{d:"M14 21h-4V3h4"})));const Et=e=>{let{previewController:t,currentTime:r}=e;const{i18n:n}=(0,c.$G)(),i=t.current?.duration,{isHighContrast:s}=(0,o.J1)();return(0,R.BX)("div",{css:(0,a.iv)({backgroundColor:v.DM.neutral05,borderRadius:8,padding:16,boxShadow:s?"none":"0 4px 4px var(--shadow-color)",display:"flex",flexDirection:"column",gap:12},"",""),children:[(0,R.tZ)(zt,{previewController:t,currentTime:r}),(0,R.BX)("div",{css:(0,a.iv)({textAlign:"center",color:v.DM.neutral70},"",""),children:[Rt(r,i,n.language),"/",Rt(i,i,n.language)]}),(0,R.tZ)(Tt,{previewController:t,currentTime:r})]})},Rt=(e,t,r)=>{if(void 0===e)return"--:--";const n=e%60,i=Math.floor(e/60)%60,o=Math.floor(e/3600),s=n.toLocaleString(r,{minimumFractionDigits:1,maximumFractionDigits:1}),a=`${i<=9?"0":""}${i}:${n<=9?"0":""}${s}`;return t&&t>=3600?`${o}:${a}`:a};var Bt={name:"1r962iv",styles:"padding:4px"};const Tt=e=>{let{previewController:t,currentTime:r}=e;const n=t.current?.duration||1/0,i=(0,X.rV)(),s=(0,f.I0)(),{start:d,end:c}=(0,f.fd)(),u=(0,l.useRef)(null),{isHighContrast:p}=(0,o.J1)(),h={position:"absolute",backgroundColor:v.DM.danger1,height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)",boxSizing:"content-box",background:`repeating-linear-gradient(45deg,${v.DM.danger2}, ${v.DM.danger2} 4px,${v.DM.danger1} 4px, ${v.DM.danger1} 8px)`};return(0,R.tZ)("div",{css:Bt,children:(0,R.BX)("div",{ref:u,css:(0,a.iv)({"--scrubber-border-radius":"3px","--scrubber-height":"6px","@media not (any-pointer: fine)":{"--scrubber-border-radius":"6px","--scrubber-height":"12px"},position:"relative",backgroundColor:v.DM.accent4,width:"100%",height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)"},"",""),children:[(0,R.tZ)("div",{onClick:e=>(e=>{const r=e.currentTarget.getBoundingClientRect();let i=(e.clientX-r.x)/r.width;i<0?i=0:i>1&&(i=1),t.current&&(t.current.currentTime=i*n)})(e),css:(0,a.iv)({position:"absolute",width:"100%",cursor:"pointer",zIndex:5,top:-6,bottom:-6},"",""),children:(0,R.tZ)(It,{scrubberRef:u,previewController:t,initialTime:r,onDrag:e=>(0,o.nf)(t.current).currentTime=e,children:(0,R.tZ)("div",{css:(0,a.iv)({width:16,height:16,"@media not (any-pointer: fine)":{width:24,height:24},borderRadius:"50%",backgroundColor:v.DM.neutral05,border:`1px solid ${v.DM.neutral40}`},"","")})})}),null!=d&&d>0&&(0,R.tZ)("div",{css:(0,a.iv)({left:0,borderRight:"2px solid black",width:d/n*100+"%",...h},"","")}),null!=c&&c<n&&(0,R.tZ)("div",{css:(0,a.iv)({right:0,borderLeft:"2px solid black",width:(n-c)/n*100+"%",...h,backgroundPosition:"right",backgroundSize:"100vw"},"","")}),i.review?.disableCutting||(0,R.BX)(R.HY,{children:[(0,R.tZ)(It,{scrubberRef:u,previewController:t,initialTime:d??0,clamp:e=>Math.min(e,c??n),onDrag:e=>s({type:"UPDATE_START",time:e}),children:(0,R.tZ)($t,{side:"left",isHighContrast:p})}),(0,R.tZ)(It,{scrubberRef:u,previewController:t,initialTime:c??n,clamp:e=>Math.max(e,d??0),onDrag:e=>s({type:"UPDATE_END",time:e}),children:(0,R.tZ)($t,{side:"right",isHighContrast:p})})]}),(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",left:0,width:r/n*100+"%",backdropFilter:"brightness(0.75)",height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)"},"","")})]})})},$t=e=>{let{side:t,isHighContrast:r}=e;return(0,R.tZ)("div",{css:(0,a.iv)({width:14,height:20,"@media not (any-pointer: fine)":{height:24},backgroundColor:v.DM.neutral05,color:v.DM.neutral70,border:`1px solid ${v.DM.neutral40}`,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:r?"none":"0 1px 2px var(--shadow-color)"},"",""),children:(0,R.tZ)(Ct,{css:(0,a.iv)({transform:"scale(1.2) "+("right"==t?"scaleX(-1)":"")},"","")})})},It=e=>{let{previewController:t,scrubberRef:r,initialTime:n,onDrag:i,clamp:s=(e=>e),children:d}=e;const c=t.current?.duration||1/0,u=n/c,p=(0,l.useRef)(u),h=(0,l.useRef)(),g=(0,l.useRef)(null),m=(0,l.useRef)(!1);return(0,l.useEffect)((()=>{const e=()=>{m.current&&(m.current=!1,i?.(p.current*c),(0,o.nf)(g.current).style.left="")},t=e=>{r(e.pageX)},r=e=>{if(m.current){const t=(0,o.nf)(h.current),r=Math.min(1,Math.max(0,(e-t.left)/t.width));p.current=s(c*r)/c,i?.(p.current*c),(0,o.nf)(g.current).style.left=100*p.current+"%"}},n=e=>{e.touches.length>0&&r(e.touches[0].pageX)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),document.addEventListener("mousemove",t),document.addEventListener("touchmove",n),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",n)}})),(0,R.tZ)("div",{ref:g,onMouseDown:()=>{m.current=!0,h.current=(0,o.nf)(r.current).getBoundingClientRect()},onTouchStart:()=>{console.log("TOUCH START"),m.current=!0,h.current=(0,o.nf)(r.current).getBoundingClientRect()},css:(0,a.iv)({position:"absolute",zIndex:10,left:100*u+"%",cursor:"grab",userSelect:"none",top:"50%",transform:"translateY(-50%) translateX(-50%)",padding:"8px 4px"},"",""),children:d})};var Lt={name:"r8hnng",styles:"display:flex;gap:16px;justify-content:center;align-items:flex-end"},jt={name:"1i7v2bx",styles:"margin-left:3px"};const zt=e=>{let{currentTime:t,previewController:r}=e;const{start:n,end:i}=(0,f.fd)(),s=(0,f.I0)(),l=(0,X.rV)(),{t:u}=(0,c.$G)(),p=()=>{const e=r.current;e&&(e.isPlaying?e.pause():e.isReadyToPlay&&e.play())};Se(Ze.review.playPause,p,{ignoreEventWhen:e=>"Space"===e.code&&e.target instanceof HTMLButtonElement});const h=Me(),{isHighContrast:g}=(0,o.J1)(),m=r.current?.isPlaying,b=u("steps.review."+(m?"pause":"play"));return(0,R.BX)("div",{css:Lt,children:[l.review?.disableCutting||(0,R.tZ)(Xt,{marker:"start",value:n,control:i,invariant:(e,t)=>e<t,recordingDispatch:s,previewController:r,currentTime:t}),(0,R.tZ)(o.Rl,{tooltip:b,children:(0,R.BX)(o.Wg,{"aria-label":b,css:(0,a.iv)({backgroundColor:v.DM.accent5,color:g?v.DM.neutral05:"white",border:"none",borderRadius:"50%",width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center",fontSize:24,...(0,v.jq)({offset:1}),"&:hover, :focus-visible":{backgroundColor:v.DM.accent6,...g&&{backgroundColor:v.DM.neutral05,outline:`2px solid ${v.DM.accent4}`,color:v.DM.accent4}}},"",""),onClick:p,onMouseDown:e=>e.preventDefault(),children:[h&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",bottom:-20,padding:2,borderRadius:4,backgroundColor:v.DM.neutral05},"",""),children:(0,R.tZ)(Ce,{shortcut:Ze.review.playPause.split(";")[0]})}),m?(0,R.tZ)(d.R4s,{}):(0,R.tZ)(d.KCr,{css:jt})]})}),l.review?.disableCutting||(0,R.tZ)(Xt,{marker:"end",value:i,control:n,invariant:(e,t)=>t<e,recordingDispatch:s,previewController:r,currentTime:t})]})},Xt=e=>{let{marker:t,value:r,control:n,invariant:i,currentTime:s,previewController:l,recordingDispatch:d}=e;const{t:u,i18n:p}=(0,c.$G)(),{isHighContrast:h}=(0,o.J1)(),g=s<=Nt||l.current&&s>=l.current.duration||null!=n&&!i(s,n),m=()=>{if(!l.current)return;let e=l.current.currentTime;null==n||i(e,n)||(e=n),d({type:"start"===t?"UPDATE_START":"UPDATE_END",time:e})},f=Ze.review["start"===t?"cutLeft":"cutRight"];Se(f,m,{enabled:!g}),Se(Ze.review["start"===t?"removeCutLeft":"removeCutRight"],(()=>d({type:"start"===t?"UPDATE_START":"UPDATE_END",time:null})));const b=Me(),x=(0,R.tZ)("div",{css:(0,a.iv)({minWidth:68,textAlign:"start"==t?"right":"left"},"",""),children:null!==r&&(0,R.tZ)(o.Rl,{tooltip:u("steps.review.jump-to-cut-point"),children:(0,R.tZ)(o.Wg,{css:(0,a.iv)({padding:"4px 0",color:v.DM.accent6},"",""),onClick:e=>{e.preventDefault(),l.current&&(l.current.currentTime=r)},onMouseDown:e=>e.preventDefault(),children:Rt(r,r,p.language)})})}),w=(0,R.tZ)(o.Rl,{tooltip:u(`steps.review.set-${t}`),children:(0,R.BX)(o.Wg,{disabled:g,"aria-label":u(`steps.review.set-${t}`),onClick:m,onMouseDown:e=>e.preventDefault(),css:(0,a.iv)({lineHeight:0,padding:"4px 8px",paddingTop:4,borderRadius:4,...(0,v.jq)(),"&:disabled":{opacity:.3},"&:not(:disabled):hover":{backgroundColor:v.DM.neutral10,color:h?v.DM.accent4:"inherit"}},"",""),children:[(0,R.tZ)(St,{css:(0,a.iv)({height:36,width:36,transform:"end"===t?"scaleX(-1)":""},"","")}),b&&!g&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",bottom:-20,padding:2,borderRadius:4,backgroundColor:v.DM.neutral05},"",""),children:(0,R.tZ)(Ce,{shortcut:f})})]})});return"start"===t?(0,R.BX)(R.HY,{children:[x,w]}):(0,R.BX)(R.HY,{children:[w,x]})};var At;function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ot.apply(this,arguments)}var Ht=e=>l.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 100 65",width:"1em",height:"1em"},e),At||(At=l.createElement("path",{fill:"currentColor",d:"M24.6 0c-.447 0-.894.171-1.24.511l-3.07 3.05a1.73 1.73 0 0 0 0 2.46l58.8 58.5c.685.681 1.79.681 2.47 0l3.07-3.05a1.73 1.73 0 0 0 0-2.46l-6.68-6.64h22v-7.32h-15.6c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h15.6v-7.32h-56.4L25.75.551A1.75 1.75 0 0 0 24.51.04zM0 18.2v7.32h3.7c1.44 0 2.6 1.15 2.6 2.59v14.3C6.3 43.84 5.14 45 3.7 45H0v7.32h55.8l-15.4-15.3v5.36c0 1.43-1.16 2.59-2.6 2.59H16c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h12.8l-7.36-7.32zm51 7.32h21c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-1.4z"}))),Pt={name:"zxsb69",styles:"position:relative;width:100%;height:100%"},Ut={name:"1j80pbv",styles:"position:absolute;left:0;right:0;top:0;bottom:0;background-color:rgba(0, 0, 0, 0.65);color:white;display:flex;flex-direction:column;align-items:center;justify-content:start;padding-top:16px;pointer-events:none"},_t={name:"6yeg13",styles:"font-size:3em"},Wt={name:"te1fbj",styles:"margin:8px 0"};const qt=(0,l.forwardRef)(((e,t)=>{let{onTimeUpdate:r,onReady:n,onPausePlay:i}=e;const{recordings:s,start:d,end:u}=(0,f.fd)(),{t:p}=(0,c.$G)(),{isHighContrast:h}=(0,o.J1)(),g=[(0,l.useRef)(null),(0,l.useRef)(null)],m=g.slice(0,s.length),v=2===s.length?"desktop"===s[0].deviceType?0:1:null,b=(0,l.useRef)(),x=(0,l.useRef)(null),w=e=>{m.some((e=>e.current?.seeking))?x.current=e:m.forEach((t=>{t.current&&(t.current.currentTime=Math.max(0,Math.min(e,t.current.duration)))}))};(0,l.useImperativeHandle)(t,(()=>({get currentTime(){return(0,o.nf)(g[b.current??0].current?.currentTime)},set currentTime(e){w(e)},get duration(){return(0,o.nf)(g[b.current??0].current?.duration)},get isPlaying(){const e=g[b.current??0].current;return null!=e&&e.currentTime>0&&!e.paused&&!e.ended},get isReadyToPlay(){return m.every((e=>(e.current?.readyState??0)>=2))},play(){m.forEach((e=>e.current?.play())),i(!1)},pause(){m.forEach((e=>e.current?.pause())),i(!0)}})));const y=[(0,l.useRef)(),(0,l.useRef)()],[Z,D]=(0,l.useState)(!1),k=e=>null!==d&&e<d||null!==u&&e>u,S=g[b.current??0].current?.currentTime||0,M=k(S),[,C]=(0,l.useState)(M);(0,l.useEffect)((()=>{Z&&n()}),[n,Z]),(0,l.useEffect)((()=>{if(Z&&null!=v){(0,o.nf)(g[v].current).volume=0;const e=(0,o.nf)(g[0].current),t=(0,o.nf)(g[1].current);let r,n=0;const i=()=>{if(n%60==0&&Math.abs(e.currentTime-t.currentTime)>.15&&null!=b.current){const e=g[b.current].current,t=g[0===b.current?1:0].current;(0,o.nf)(t).currentTime=(0,o.nf)(e).currentTime}n++,r=window.requestAnimationFrame(i)};return r=window.requestAnimationFrame(i),()=>window.cancelAnimationFrame(r)}}));const E=e=>w((0,o.nf)(g[b.current??0].current?.currentTime)+e);Se(Ze.review.forwards5secs,(()=>E(5))),Se(Ze.review.backwards5secs,(()=>E(-5))),Se(Ze.review.forwardsFrame,(()=>E(1/30))),Se(Ze.review.backwardsFrame,(()=>E(-1/30)));const B=s.map(((e,t)=>({dimensions:()=>e.dimensions,body:(0,R.BX)("div",{css:Pt,children:[M&&(0,R.BX)("div",{css:Ut,children:[(0,R.tZ)(Ht,{css:_t}),(0,R.tZ)("p",{css:Wt,children:p("steps.review.part-will-be-removed")})]}),(0,R.tZ)("video",{ref:g[t],src:e.url,onLoadedData:e=>{e.currentTarget.currentTime=Number.MAX_VALUE,y[t].current="started"},onSeeked:()=>{if(Z){const e=g[0==t?1:0].current?.seeking,r=x.current;e||null==r||(m.forEach((e=>{e.current&&(e.current.currentTime=r)})),x.current=null)}},onTimeUpdate:e=>{Z?(C(k(e.currentTarget.currentTime)),r(e)):(0,o.EQ)((0,o.nf)(y[t].current),{started:()=>{e.currentTarget.currentTime=Nt,y[t].current="done"},done:()=>{y.filter((e=>"done"===e.current)).length===s.length&&D(!0)}})},autoPlay:/iPad|iPhone|iPod/.test(navigator.userAgent),playsInline:!0,preload:"auto",tabIndex:-1,css:(0,a.iv)({width:"100%",height:"100%",outline:"none",boxShadow:h?"none":"0 4px 16px var(--shadow-color)",borderRadius:16},"","")},t)]})})));return(0,R.tZ)($,{gap:20,children:B})})),Nt=.001;var Gt={name:"sw5ovr",styles:"flex:1;display:flex;align-items:center;justify-content:center;font-size:42px"};const Ft=e=>{let{goToFirstStep:t,goToNextStep:r}=e;const{t:n}=(0,c.$G)(),i=(0,f.I0)(),{recordings:s,prematureRecordingEnd:u,videoChoice:p}=(0,f.fd)(),h=s.some((e=>0===e.media.size)),g=(0,l.useRef)(null),[m,v]=(0,l.useState)(0),[b,x]=(0,l.useState)(!1),[w,y]=(0,l.useState)(!0),Z=(0,o.EQ)(p,{both:()=>2,display:()=>1,user:()=>1,none:()=>0});return(0,R.BX)(_e,{title:n("steps.review.label"),note:n("steps.review.only-on-upload-note"),prevButton:{danger:!0,icon:(0,R.tZ)(d.We9,{}),label:n("steps.review.button-discard-and-record"),onClick:()=>{window.confirm(n("confirm-discard-recordings"))&&(i({type:"RESET"}),t())}},nextButton:{onClick:r},children:[u&&(0,R.tZ)(z,{body:n("error-lost-stream-end-recording")}),h&&(0,R.tZ)(z,{body:n("steps.review.error-empty-recording")}),(!b||s.length!==Z)&&(0,R.tZ)("div",{css:Gt,children:(0,R.tZ)(o.$j,{})}),s.length===Z&&(0,R.BX)("div",{css:(0,a.iv)({display:b?"flex":"none",flex:"1 1 auto",gap:16,flexDirection:"column"},"",""),children:[(0,R.tZ)(qt,{ref:g,onTimeUpdate:e=>{v(e.currentTarget.currentTime)},onPausePlay:e=>y(e),onReady:()=>x(!0)}),(0,R.tZ)(Et,{previewController:g,currentTime:m})]})]})};var Jt={name:"1kr2sal",styles:"display:flex;flex-direction:column;align-items:center;:not(:first-of-type){margin-top:32px;}"},Vt={name:"bjn8wh",styles:"position:relative"},Yt={name:"3vo0co",styles:"border-radius:4px;display:block;max-height:190px;margin:0 auto"},Qt={name:"2dzgoj",styles:"position:absolute;bottom:0;right:0;left:0;color:white;background-color:rgba(30, 30, 30, 0.85);display:flex;justify-content:center;align-items:center;gap:8px;padding:12px;border-radius:0 0 4px 4px"},Kt={name:"1kvnwqk",styles:"font-size:22px"},er={name:"14is9qy",styles:"font-size:20px"};const tr=()=>{const{t:e,i18n:t}=(0,c.$G)(),{recordings:r,title:n,presenter:i}=(0,f.fd)(),s=(0,f.I0)(),u=Me(),p=r.map((()=>(0,l.useRef)(null)));return Se(Ze.finish.download,(()=>{for(const e of p)e.current?.click()})),r.map(((r,l)=>{const{deviceType:c,mimeType:h,url:g,downloaded:m,media:f}=r,b=e("desktop"===c?"sources-display":"sources-user"),x=(0,v.oe)({mime:h,flavor:b,title:n,presenter:i}),{isHighContrast:w}=(0,o.J1)();return g?(0,R.BX)("div",{css:Jt,children:[(0,R.BX)("div",{css:Vt,children:[(0,R.tZ)("video",{tabIndex:-1,muted:!0,src:g,onLoadedData:e=>e.currentTarget.currentTime=0,preload:"auto",css:Yt}),m&&(0,R.BX)("div",{css:Qt,children:[(0,R.tZ)(xe.LF_,{css:Kt}),e("steps.finish.save-locally.recording-saved")]})]}),(0,R.BX)("a",{ref:p[l],"aria-label":e(`steps.finish.save-locally.save-${c}-locally`),target:"_blank",download:x,href:g,rel:"noopener noreferrer",role:"button",onClick:()=>s({type:"MARK_DOWNLOADED",index:l}),onKeyDown:e=>{" "===e.key&&(e.preventDefault(),p[l].current?.click())},css:(0,a.iv)({...$r(w),justifyContent:"center",maxWidth:260,margin:"auto",marginTop:8},"",""),children:[(0,R.tZ)(d._hL,{css:er}),e("steps.finish.save-locally.label")+" ("+Ir(f.size,t)+")",u&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",right:-4,bottom:-4},"",""),children:(0,R.tZ)(Ce,{shortcut:Ze.finish.download})})]})]},l):null}))};var rr=r(644),nr=r(7536);const ir="ocStudioLastPresenter";let or=[];const sr=()=>{const e=(0,X.rV)(),{t:t}=(0,c.$G)(),r=(0,at.mx)(),{recordings:n,upload:i,title:s,presenter:a,...d}=(0,f.fd)(),u=(0,f.I0)();function p(e){const t=Date.now();or.push({timestamp:t,progress:e});const r=Math.min(or.findIndex((e=>t-e.timestamp<5e3)),Math.max(0,or.length-6));or.splice(0,r);let n=null;if(or.length>=4){const r=t-or[0].timestamp,i=(e-or[0].progress)/r*1e3,o=1-e;n=Math.max(0,Math.round(o/i))}i.secondsLeft===n&&i.currentProgress===e||u({type:"UPLOAD_PROGRESS_UPDATE",secondsLeft:n,currentProgress:e})}(0,l.useEffect)((()=>{const e=setInterval((()=>{if("uploading"===i.state)if(or.length){const e=or[or.length-1];Date.now()-e.timestamp>3e3&&p(e.progress)}else p(0)}),1e3);return()=>clearInterval(e)}));const h=async i=>{u({type:"UPLOAD_REQUEST"}),or.push({timestamp:Date.now(),progress:0});const s=await r.upload({recordings:n.filter(Boolean),title:i.title,presenter:i.presenter,series:i.series,uploadSettings:e.upload,onProgress:p,start:d.start,end:d.end,startTime:d.recordingStartTime??(0,o.t1)("no start time set"),endTime:d.recordingEndTime??(0,o.t1)("no end time set")});or=[];const a=e=>u({type:"UPLOAD_ERROR",msg:e});(0,o.EQ)(s,{success:()=>u({type:"UPLOAD_SUCCESS"}),network_error:()=>a(t("steps.finish.upload.upload-network-error")),not_authorized:()=>a(t("steps.finish.upload.upload-not-authorized")),unexpected_response:()=>a(t("steps.finish.upload.upload-invalid-response"))},(()=>a(t("steps.finish.upload.upload-unknown-error"))))};switch(i.state){case"uploading":return(0,R.tZ)(Zr,{currentProgress:i.currentProgress,secondsLeft:i.secondsLeft});case"uploaded":return(0,R.tZ)(kr,{});default:return(0,R.tZ)(ur,{uploadState:i,handleUpload:h})}};var ar={name:"q3psig",styles:"font-size:16px;font-weight:700;margin-top:20px"},lr={name:"14is9qy",styles:"font-size:20px"},dr={name:"hkh81z",styles:"margin-top:8px"},cr={name:"ti75j2",styles:"margin:0"};const ur=e=>{let{handleUpload:t}=e;const{titleField:r="required",presenterField:n="required",seriesField:i="optional",autofillPresenter:s=[]}=(0,X.rV)().upload??{},{t:u,i18n:p}=(0,c.$G)(),h=(0,at.mx)(),g=(0,f.I0)(),m=(0,X.$_)(),{title:v,presenter:b,upload:x,recordings:w}=(0,f.fd)(),y=b||window.localStorage.getItem(ir)||s.map((e=>(0,o.EQ)(e,{opencast:()=>h.getUsername()}))).find(Boolean)||"",[Z,D]=(0,l.useState)("idle"),{formState:{errors:k},handleSubmit:S,register:M,control:C,getValues:E}=(0,nr.cI)({defaultValues:m.formValues().opencast}),{field:B}=(0,nr.bc)({name:"series",control:C,rules:{required:"required"===i&&u("steps.finish.upload.validation-error-required")}});function T(e){const t=e.target;g({type:(0,o.nf)({title:"UPDATE_TITLE",presenter:"UPDATE_PRESENTER"}[t.name]),value:t.value}),"presenter"===t.name&&window.localStorage.setItem(ir,t.value)}(0,l.useEffect)((()=>{y!==b&&g({type:"UPDATE_PRESENTER",value:y})}),[]);const $=m.isConfigurable("opencast.serverUrl"),I=m.isUsernameConfigurable(),L=m.isPasswordConfigurable(),j=$||I||L,A=e=>({serverUrl:e.serverUrl,loginName:e.loginName,loginPassword:e.loginPassword}),O=w.reduce(((e,t)=>e+t.media.size),0),H=Ir(O,p),{isHighContrast:P}=(0,o.J1)(),U=async()=>{const e=E(),t=m.settings().opencast;if(!(e.serverUrl&&e.serverUrl!==t?.serverUrl||e.loginName&&e.loginName!==t?.loginName||e.loginPassword&&e.loginPassword!==t?.loginPassword))return;const r=A(e),n=await at._r.init({...m.settings().opencast,...r});"logged_in"===n.getState()&&(h.setGlobalInstance(n),m.saveSettings({opencast:r}))};return(0,R.BX)(R.HY,{children:[(0,R.BX)("form",{onSubmit:S((async e=>{if(!j)return void await t(e);console.log(e),D("testing");const r=A(e),n=await at._r.init({...m.settings().opencast,...r}),i=(0,o.EQ)(n.getState(),{logged_in:()=>(h.setGlobalInstance(n),m.saveSettings({opencast:r}),null),incorrect_login:()=>h.isLoginProvided()?u("steps.finish.upload.settings-invalid-provided-login"):u("steps.finish.upload.settings-invalid-login-data"),network_error:()=>u("steps.finish.upload.upload-network-error"),invalid_response:()=>u("steps.finish.upload.upload-invalid-response"),response_not_ok:()=>u("steps.finish.upload.upload-invalid-response")},(()=>(0,o.t1)()));i?(g({type:"UPLOAD_ERROR",msg:i}),D("idle")):await t(e)})),children:["hidden"!==r&&(0,R.tZ)(gr,{name:"title",label:u("steps.finish.upload.label-title"),required:"required"===r,onChange:T,autoComplete:"off",defaultValue:v,autoFocus:!0,errors:k,register:M}),"hidden"!==n&&(0,R.tZ)(gr,{name:"presenter",label:u("steps.finish.upload.label-presenter"),required:"required"===n,onChange:T,autoComplete:"off",defaultValue:y,errors:k,register:M}),"hidden"!==i&&(0,R.tZ)(fr,{formProps:B,showOpencastSection:j,errors:k}),j&&(0,R.BX)(R.HY,{children:[(0,R.tZ)("h3",{css:ar,children:u("steps.finish.upload.settings-header")}),$&&(0,R.tZ)(gr,{errors:k,label:u("steps.finish.upload.settings-label-server-url"),name:"serverUrl",register:M,onBlur:U,required:!0,validate:e=>{try{const t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol||u("steps.finish.upload.settings-invalid-url-http-start")}catch{let t=u("steps.finish.upload.settings-invalid-url");return e.startsWith("https://")||e.startsWith("http://")||(t+=" "+u("steps.finish.upload.settings-invalid-url-http-start")),t}}}),I&&(0,R.tZ)(gr,{errors:k,label:u("steps.finish.upload.settings-label-username"),name:"loginName",register:M,onBlur:U,required:!0}),L&&(0,R.tZ)(gr,{errors:k,label:u("steps.finish.upload.settings-label-password"),name:"loginPassword",register:M,onBlur:U,required:!0,type:"password"})]}),(0,R.BX)(o.Wg,{type:"submit",css:(0,a.iv)({...$r(P),margin:"0 auto",marginTop:24},"",""),children:[(0,o.EQ)(Z,{idle:()=>(0,R.tZ)(d.Yjd,{css:lr}),testing:()=>(0,R.tZ)(o.$j,{size:20})}),(0,R.tZ)("span",{children:u("steps.finish.upload.label")+" ("+H+")"})]})]}),(0,R.tZ)("div",{css:dr,children:"error"===x.state&&(0,R.tZ)(z,{css:cr,body:(0,o.nf)(x.error),extraBody:u("steps.finish.upload.warn-download-hint")})})]})};var pr={name:"cn3xcj",styles:"margin-bottom:12px"},hr={name:"mk6g3b",styles:"display:block;box-sizing:border-box;position:relative;text-align:left"};const gr=e=>{let{errors:t,register:r,label:n,name:i,required:o,validate:s,type:d="text",...u}=e;const{t:p}=(0,c.$G)(),h=t[i],g=(0,l.useId)();return(0,R.BX)("div",{css:pr,children:[(0,R.tZ)("label",{htmlFor:g,css:(0,a.iv)({display:"block",fontWeight:700,color:v.DM.neutral70,margin:"4px 0",fontSize:14},"",""),children:n}),(0,R.BX)("div",{css:hr,children:[(0,R.tZ)("input",{id:g,"aria-invalid":h?"true":"false","aria-describedby":h?`${i}Error`:g,autoComplete:"off",type:d,...u,...r(i,{validate:s,onChange:u.onChange,onBlur:u.onBlur,...o&&{required:p("steps.finish.upload.validation-error-required")}}),css:(0,a.iv)({display:"block",width:"100%",borderRadius:4,border:`1px solid ${h?v.DM.danger4:v.DM.neutral30}`,backgroundColor:v.DM.neutral00,color:v.DM.neutral70,padding:"8px 16px",...(0,v.jq)({offset:-1})},"","")}),h&&(0,R.tZ)(mr,{id:`${i}Error`,children:h.message})]})]})},mr=e=>{let{id:t,children:r}=e;return(0,R.tZ)("div",{id:t,css:(0,a.iv)({backgroundColor:v.DM.danger1,color:v.DM.danger5,marginTop:4,borderRadius:4,padding:"6px 12px",lineHeight:1.2},"",""),children:r})};var vr={name:"cn3xcj",styles:"margin-bottom:12px"};const fr=e=>{let{formProps:t,showOpencastSection:r,errors:n}=e;const{t:i,i18n:s}=(0,c.$G)(),d=(0,at.mx)(),{scheme:u}=(0,o.J1)(),p=(0,X.rV)().upload?.seriesId,[h,g]=(0,l.useState)(null),m=(0,l.useRef)(null);(0,l.useEffect)((()=>{g(null),d.getSeries().then((e=>{const t=[...e.entries()].map((e=>{let[t,r]=e;return{value:t,label:r}}));if(t.sort(((e,t)=>e.label.localeCompare(t.label,s.language,{sensitivity:"base"}))),p){const r=e.get(p),n={label:r??i("steps.finish.upload.series-unknown"),value:p};null==r&&t.push(n),m.current?.setValue(n,"select-option")}g(t)}),(e=>{console.log("Error fetching series: ",e),g("error")}))}),[d]);const f=(0,l.useId)(),b=(0,l.useId)(),x="error"===h;return(0,R.BX)("div",{css:vr,children:[(0,R.tZ)("label",{htmlFor:f,css:(0,a.iv)({display:"block",fontWeight:700,color:v.DM.neutral70,margin:"4px 0",fontSize:14},"",""),children:i("steps.finish.upload.label-series")}),(0,R.tZ)(rr.ZP,{id:f,ref:m,options:h&&"error"!==h?h:[],isLoading:null===h,isDisabled:"error"===h,isClearable:!0,isSearchable:!0,onChange:e=>t.onChange(e?.value),onBlur:t.onBlur,"aria-invalid":x?"true":"false","aria-describedby":x?b:f,placeholder:i("steps.finish.upload.series-placeholder"),loadingMessage:()=>i("steps.finish.upload.series-loading"),noOptionsMessage:()=>i("steps.finish.upload.series-none"),styles:br(u.startsWith("dark"),u.endsWith("high-contrast")),theme:e=>({...e,colors:{...e.colors,danger:v.DM.danger0,primary:v.DM.focus,neutral0:v.DM.neutral00,neutral5:v.DM.neutral15,neutral10:v.DM.neutral20,neutral20:v.DM.neutral30,neutral30:v.DM.neutral40,neutral40:v.DM.neutral50,neutral50:v.DM.neutral50,neutral60:v.DM.neutral60,neutral70:v.DM.neutral70,neutral80:v.DM.neutral80,neutral90:v.DM.neutral90}})}),x&&(0,R.BX)(mr,{id:b,children:[i("steps.finish.upload.series-fetch-error"),r&&" "+i("steps.finish.upload.series-connection-settings-hint")]}),n.series&&(0,R.tZ)(mr,{id:b,children:n.series.message})]})},br=(e,t)=>({control:(e,t)=>({...e,backgroundColor:v.DM.neutral00,paddingLeft:8,...!t.isFocused&&{borderColor:v.DM.neutral30},...t.isFocused&&{boxShadow:`0 0 0 1.5px ${v.DM.focus}`}}),input:e=>({...e,color:v.DM.neutral80,padding:"4px 0"}),placeholder:e=>({...e,color:v.DM.neutral60}),singleValue:e=>({...e,color:v.DM.neutral90}),menuList:e=>({...e,padding:0}),menu:r=>({...r,...e&&{outline:`1px solid ${v.DM.neutral20}`},...t&&{outline:`1px solid ${v.DM.neutral90}`},backgroundColor:e?v.DM.neutral10:v.DM.neutral05,overflow:"hidden"}),option:(r,n)=>({cursor:"default",padding:"6px 10px",borderLeft:`4px solid ${n.isSelected?v.DM.focus:"transparent"}`,...t&&n.isFocused&&{outline:`2px solid ${v.DM.neutral90}`,outlineOffset:-3},...(n.isFocused||n.isSelected)&&!t&&{backgroundColor:e?v.DM.neutral25:v.DM.neutral10}})});var xr={name:"1j389vi",styles:"font-weight:700"},wr={name:"zjik7",styles:"display:flex"},yr={name:"82a6rk",styles:"flex:1"};const Zr=e=>{let{currentProgress:t,secondsLeft:r}=e;const{t:n,i18n:i}=(0,c.$G)(),o=Math.min(100,100*t).toLocaleString(i.language,{minimumFractionDigits:1,maximumFractionDigits:1});let s;return s=null===r?null:r<4?n("steps.finish.upload.time.a-few-seconds"):r<45?`${r} ${n("steps.finish.upload.time.seconds")}`:r<90?n("steps.finish.upload.time.a-minute"):r<2700?`${Math.round(r/60)} ${n("steps.finish.upload.time.minutes")}`:r<5400?n("steps.finish.upload.time.an-hour"):r<86400?`${Math.round(r/3600)} ${n("steps.finish.upload.time.hours")}`:null,(0,R.BX)(Sr,{children:[(0,R.tZ)("div",{css:xr,children:n("steps.finish.upload.currently-uploading")}),(0,R.tZ)("div",{css:(0,a.iv)({marginTop:16,marginBottom:8,height:6,borderRadius:3,backgroundColor:v.DM.neutral05,overflow:"hidden"},"",""),children:(0,R.tZ)("div",{css:(0,a.iv)({width:100*t+"%",height:"100%",backgroundColor:v.DM.accent5},"","")})}),(0,R.BX)("div",{css:wr,children:[(0,R.BX)("div",{children:[o,"%"]}),(0,R.tZ)("div",{css:yr}),(0,R.tZ)("div",{children:s&&(0,R.BX)(c.cC,{i18nKey:"steps.finish.upload.time.left",children:[{time:s}," left"]})})]})]})};var Dr={name:"1j389vi",styles:"font-weight:700"};const kr=()=>{const{t:e}=(0,c.$G)();return(0,R.BX)(Sr,{children:[(0,R.tZ)("div",{css:Dr,children:e("steps.finish.upload.complete")}),(0,R.tZ)("div",{css:(0,a.iv)({fontSize:50,margin:24,lineHeight:0,color:v.DM.accent5},"",""),children:(0,R.tZ)(xe.LF_,{})}),(0,R.tZ)("div",{children:e("steps.finish.upload.complete-explanation")})]})},Sr=e=>{let{children:t}=e;return(0,R.tZ)("div",{css:(0,a.iv)({backgroundColor:v.DM.neutral10,fontSize:14,marginTop:24,padding:24,borderRadius:6,textAlign:"center"},"",""),children:t})};var Mr={name:"s8j37n",styles:"height:calc(35%)"},Cr={name:"1ya0myq",styles:"height:calc(65%)"};const Er=e=>{let{goToPrevStep:t,goToFirstStep:r}=e;const{t:n}=(0,c.$G)(),{recordings:i,upload:s}=(0,f.fd)(),l=(0,f.I0)(),u=(0,X.rV)(),p=i.every((e=>e.downloaded)),h=("uploaded"===s.state||p)&&"uploading"!==s.state,g="not_uploaded"!==s.state||p,m={label:n("steps.finish.new-recording"),icon:(0,R.tZ)(xe.wxN,{}),onClick:()=>{window.confirm(n("steps.finish.new-recording-warning"))&&(l({type:"RESET"}),r())}},v=Tr(u),b=v?{label:n("steps.finish.finish-button"),disabled:!h,popoverEntries:[m,{label:u.return?.label?n("steps.finish.return-to",{label:u.return.label}):n("steps.finish.return-to-no-label"),href:v,icon:(0,R.tZ)(d.$Rx,{})}]}:{disabled:!h,...m};return Se(Ze.finish.startNewRecording,m.onClick,{enabled:h}),(0,R.BX)(_e,{title:n("steps.finish.label"),prevButton:g?void 0:{onClick:t},nextButton:b,children:[(0,R.tZ)("div",{css:Mr}),(0,R.BX)("div",{css:(0,a.iv)({display:"flex",justifyContent:"center",alignItems:"start",gap:16,[(0,o.xf)(700)]:{flexDirection:"column",alignItems:"center"}},"",""),children:[(0,R.tZ)(Br,{title:n("steps.finish.upload.label"),children:(0,R.tZ)(sr,{})}),(0,R.tZ)(Br,{title:n("steps.finish.save-locally.label"),children:(0,R.tZ)(tr,{})})]}),(0,R.tZ)("div",{css:Cr})]})};var Rr={name:"15ara9j",styles:"text-align:center;font-size:20px;font-weight:700;margin-bottom:12px"};const Br=e=>{let{title:t,children:r}=e;const{isHighContrast:n}=(0,o.J1)();return(0,R.BX)("div",{css:(0,a.iv)({maxWidth:420,width:"100%",backgroundColor:v.DM.neutral05,boxShadow:n?"none":"0 4px 16px var(--shadow-color)",border:`1px solid ${v.DM.neutral15}`,padding:"24px 32px",borderRadius:6,minHeight:330},"",""),children:[(0,R.tZ)("h2",{css:Rr,children:t}),r]})},Tr=e=>{if(!e.return?.target)return null;let t;try{t=new URL(e.return.target,window.location.href)}catch{return null}return![window.location.hostname,...e.return?.allowedDomains||[]].some((e=>t.hostname===e))||"https:"!==t.protocol&&"http:"!==t.protocol?null:e.return.target},$r=e=>({display:"flex",alignItems:"center",padding:"8px 12px",gap:12,borderRadius:8,textDecoration:"none",position:"relative",":not([disabled])":{color:v.DM.neutral05,cursor:"pointer",backgroundColor:v.DM.accent7,":hover":{backgroundColor:v.DM.accent8,...e&&{backgroundColor:v.DM.neutral15,outline:`2px solid ${v.DM.accent8}`,color:v.DM.neutral20}}},"&[disabled]":{backgroundColor:v.DM.neutral15,color:v.DM.neutral70},...(0,v.jq)({offset:1})}),Ir=(e,t)=>{const r=e=>{const r=e<10?1:0;return e.toLocaleString(t.language,{minimumFractionDigits:r,maximumFractionDigits:r})};return e<1e3?`${e} B`:e<999500?`${r(e/1e3)} KB`:e<9995e5?`${r(e/1e6)} MB`:`${r(e/1e9)} GB`},Lr=["video-select","audio-select","recording","review","finish"],jr=e=>Lr.indexOf(e),zr=e=>{let{inert:t}=e;const[r,n]=(0,l.useState)("video-select"),i={goToNextStep:()=>n((0,o.nf)(Lr[jr(r)+1])),goToPrevStep:()=>n((0,o.nf)(Lr[jr(r)-1])),goToFirstStep:()=>n("video-select")};return(0,R.BX)("main",{inert:t?"":null,css:(0,a.iv)({display:"flex",flex:1,backgroundColor:v.DM.neutral10,[(0,o.xf)(v.j$.large)]:{flexDirection:"column-reverse"}},"",""),children:[(0,R.tZ)(Xr,{currentStep:r}),(0,o.EQ)(r,{"video-select":()=>(0,R.tZ)(Je,{...i}),"audio-select":()=>(0,R.tZ)(st,{...i}),recording:()=>(0,R.tZ)(mt,{...i}),review:()=>(0,R.tZ)(Ft,{...i}),finish:()=>(0,R.tZ)(Er,{...i})})]})},Xr=e=>{let{currentStep:t}=e;const{t:r}=(0,c.$G)(),{isHighContrast:n}=(0,o.J1)(),i=jr(t),s=[r("steps.video.label"),r("steps.audio.label"),r("steps.record.label"),r("steps.review.label"),r("steps.finish.label")],l="calc(8px + max(0px, 20% - 44px))";return(0,R.tZ)("div",{css:(0,a.iv)({position:"relative",flexShrink:"0",backgroundColor:v.DM.neutral05,...n&&{borderRight:`1px solid ${v.DM.neutral90}`},[(0,o.wD)(v.j$.large)]:{width:160,minWidth:160},[(0,o.xf)(v.j$.large)]:{height:42}},"",""),children:(0,R.BX)("div",{css:(0,a.iv)({position:"absolute",display:"flex",justifyContent:"space-between",[(0,o.wD)(v.j$.large)]:{flexDirection:"column",left:8,top:l,bottom:l},[(0,o.xf)(v.j$.large)]:{flexDirection:"row",top:8,left:l,right:l}},"",""),children:[s.map(((e,t)=>{let r;return r=t<i?(0,R.tZ)(m,{}):t===i?(0,R.tZ)(h,{}):(0,R.tZ)(d.Q8x,{}),(0,R.BX)("div",{css:(0,a.iv)({display:"flex",gap:12,alignItems:"center",zIndex:100,backgroundColor:v.DM.neutral05,svg:{color:t===i?v.DM.accent6:v.DM.neutral40,fontSize:26,flexShrink:0,strokeWidth:48/26,[(0,o.wD)(v.j$.large)]:{margin:"4px 0"},[(0,o.xf)(v.j$.large)]:{margin:"0 4px"}}},"",""),children:[r,(0,R.tZ)("div",{css:(0,a.iv)({fontSize:14,lineHeight:1.2,color:t==i?v.DM.accent8:v.DM.neutral70,[(0,o.xf)(v.j$.large)]:{display:"none"}},"",""),children:e})]},t)})),(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",border:`1px solid ${v.DM.neutral40}`,[(0,o.wD)(v.j$.large)]:{top:13,bottom:13,left:12},[(0,o.xf)(v.j$.large)]:{left:13,right:13,top:12}},"","")})]})})};var Ar,Or,Hr=r(3854),Pr=r(6083);function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ur.apply(this,arguments)}var _r=e=>l.createElement("svg",Ur({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),Ar||(Ar=l.createElement("rect",{width:22,height:14,x:1,y:5,rx:1,ry:1})),Or||(Or=l.createElement("path",{d:"M6 9h.001M10 9h.001M14 9h.001M18 9h.001M8 12h.001M12 12h.001M16 12h.001M6 15h12"}))),Wr=[{short:"en",long:"English",rtl:!1},{short:"de",long:"Deutsch",rtl:!1},{short:"nl",long:"Nederlands",rtl:!1},{short:"es",long:"Español",rtl:!1},{short:"fa",long:"فارسی",rtl:!0},{short:"fr",long:"Français",rtl:!1},{short:"sl",long:"Slovenščina",rtl:!1},{short:"zh",long:"简体中文",rtl:!1}];const qr=e=>{let{setOverlayBoxState:t,inert:r}=e;const{scheme:n,isHighContrast:i}=(0,o.J1)();return(0,R.BX)("header",{inert:r?"":null,css:(0,a.iv)({backgroundColor:(0,o.EQ)(n,{light:()=>v.DM.neutral60,dark:()=>v.DM.neutral20,"dark-high-contrast":()=>"black","light-high-contrast":()=>"black"}),color:i?"white":"inherit",height:"var(--header-height)",display:"flex",justifyContent:"space-between",..."dark-high-contrast"===n?{borderBottom:"1px solid white"}:{paddingBottom:1}},"",""),children:[(0,R.tZ)(Nr,{}),(0,R.tZ)(Gr,{setOverlayBoxState:t})]})},Nr=()=>{const e=e=>Pr.k.publicPath+(Pr.k.publicPath.endsWith("/")?"":"/")+e;return(0,R.BX)("picture",{css:(0,a.iv)({height:"100%",display:"flex",opacity:"dark"===(0,o.J1)().scheme?.8:1,paddingLeft:8,alignItems:"center","> *":{height:"calc(100% - 12px)"},[(0,o.xf)(410)]:{paddingLeft:0}},"",""),children:[(0,R.tZ)("source",{media:"(min-width: 920px)",srcSet:e("logo-wide.svg")}),(0,R.tZ)("img",{src:e("logo-narrow.svg"),alt:"Opencast Studio Logo"})]})},Gr=e=>{let{setOverlayBoxState:t}=e;return(0,R.BX)("div",{css:(0,a.iv)({display:"flex",gap:16,height:"100%",alignItems:"center",paddingRight:24,[(0,o.xf)(410)]:{gap:2,paddingRight:8}},"",""),children:[(0,R.tZ)(Fr,{}),(0,R.tZ)(Jr,{}),(0,R.tZ)(Yr,{open:()=>t("shortcuts")}),(0,R.tZ)(Vr,{open:()=>t("info")})]})},Fr=()=>{const{t:e,i18n:t}=(0,c.$G)(),r=e=>e===t.resolvedLanguage,n=Object.values(Wr).map((e=>(0,o.Fq)({checked:r(e.short),children:(0,R.tZ)(R.HY,{children:e.long}),onClick:()=>{r(e.short)||t.changeLanguage(e.short)}}))),i=e("header.language.label");return(0,R.tZ)(o.$S,{menu:{label:i,items:n,breakpoint:v.j$.small},children:(0,R.tZ)(Qr,{icon:(0,R.tZ)(Hr.Bze,{}),label:i})})},Jr=()=>{const{t:e}=(0,c.$G)(),{scheme:t,isAuto:r,update:n}=(0,o.J1)(),i=r?"auto":t,s=["auto","light","dark","light-high-contrast","dark-high-contrast"].map((t=>(0,o.Fq)({checked:i===t,children:(0,R.tZ)(R.HY,{children:e(`header.theme.${t}`)}),onClick:()=>n(t)})));return(0,R.tZ)(o.$S,{menu:{label:e("header.theme.label"),items:s,breakpoint:v.j$.small},children:(0,R.tZ)(Qr,{icon:(0,R.tZ)(d.wOW,{}),label:e("header.theme.label")})})},Vr=e=>{let{open:t}=e;const{t:r}=(0,c.$G)();return(0,R.tZ)(Qr,{onClick:t,icon:(0,R.tZ)(d.H33,{}),label:r("header.info.label")})},Yr=e=>{let{open:t}=e;const{t:r}=(0,c.$G)();Se(Ze.general.showOverview,t,{ignoreModifiers:!0});const n=Me();return(0,R.tZ)(Qr,{onClick:t,icon:(0,R.tZ)(_r,{}),label:r("shortcuts.label"),children:n&&(0,R.tZ)("div",{css:(0,a.iv)({position:"absolute",bottom:-20,left:20,padding:2,borderRadius:4,backgroundColor:v.DM.neutral05},"",""),children:(0,R.tZ)(Ce,{shortcut:Ze.general.showOverview})})})},Qr=(0,l.forwardRef)(((e,t)=>{let{icon:r,label:n,children:i,...s}=e;const{scheme:l,isHighContrast:d}=(0,o.J1)();return(0,R.BX)(o.Wg,{...s,ref:t,css:(0,a.iv)({position:"relative",display:"flex",gap:8,alignItems:"center",fontSize:16,fontFamily:"inherit",fontWeight:500,color:(0,o.EQ)(l,{light:()=>v.DM.neutral05,dark:()=>v.DM.neutral90,"dark-high-contrast":()=>"white","light-high-contrast":()=>"white"}),borderRadius:6,padding:"6px 8px",":hover, :active":{outline:`2px solid ${d?"#aaa":v.DM.neutral50}`,backgroundColor:(0,o.EQ)(l,{light:()=>v.DM.neutral70,dark:()=>v.DM.neutral10,"dark-high-contrast":()=>"none","light-high-contrast":()=>"none"})},...(0,v.jq)({},(0,o.EQ)(l,{light:()=>v.DM.neutral10,dark:()=>v.DM.accent8,"dark-high-contrast":()=>"#aaa","light-high-contrast":()=>"#aaa"})),"> svg":{fontSize:22,"@media (max-width: 770px)":{fontSize:26}}},"",""),children:[r,(0,R.tZ)("span",{css:(0,a.iv)({"@media (max-width: 770px)":{display:"none"}},"",""),children:n}),i]})}));var Kr={name:"tnb0o9",styles:"svg{margin-right:8px;vertical-align:middle;}"};const en=e=>{let{close:t}=e;return(0,R.tZ)(sn,{maxWidth:800,close:t,title:"Opencast Studio",children:(0,R.BX)("article",{css:(0,a.iv)({p:{margin:"8px 0"},h2:{marginTop:24,marginBottom:4,fontSize:21},a:{color:v.DM.accent7,"&:hover":{textDecoration:"none",color:v.DM.accent8}}},"",""),children:[(0,R.BX)("p",{children:["A web-based recording studio for ",(0,R.tZ)("a",{href:"https://opencast.org",children:"Opencast"}),"."]}),(0,R.tZ)("p",{children:"Opencast Studio allows you to record your camera, your display and your microphoneʼs audio. You can then either download your recordings or upload them directly to an Opencast instance (usually the one of your university)."}),(0,R.BX)("p",{children:["This is free software under the terms of the"," ",(0,R.tZ)("a",{href:"https://github.com/elan-ev/opencast-studio/blob/master/LICENSE",children:"MIT License"})," ","developed by the ",(0,R.tZ)("a",{href:"https://elan-ev.de",children:"ELAN e.V."})," in cooperation with the ",(0,R.tZ)("a",{href:"https://ethz.ch",children:"ETH Zürich"}),"."]}),(0,R.tZ)("h2",{children:"How it works"}),(0,R.tZ)("p",{children:"Opencast Studio uses the recording capabilities built into modern browsers to record audio and video streams. The recording happens in the userʼs browser and no server is involved in the recording."}),Pr.k.showLegalNotices&&(0,R.BX)(l.Fragment,{children:[(0,R.tZ)("h2",{children:"Support"}),(0,R.BX)("p",{children:["If you are experiencing any difficulties or found any bugs, please take a look at the"," ",(0,R.tZ)("a",{href:"https://github.com/elan-ev/opencast-studio/issues",children:"issue tracker on GitHub"}),". Before filing a new issue, please check if one about your topic already exists. We regularly check incoming issues and do our best to address bugs in a timely manner."]}),(0,R.BX)("p",{children:["If you are interested in additional development or want to support the development of Opencast Studio, please contact"," ",(0,R.tZ)("a",{href:"mailto:opencast-support@elan-ev.de",children:"opencast-support@elan-ev.de"}),"."]})]}),(0,R.tZ)("h2",{children:"Credits"}),(0,R.tZ)("p",{children:"Thanks to the following people and institutions for contributing to this project:"}),(0,R.BX)("ul",{children:[(0,R.BX)("li",{children:[(0,R.tZ)("a",{href:"https://github.com/slampunk",children:"Duncan Smith"})," for starting this project"]}),(0,R.BX)("li",{children:[(0,R.tZ)("a",{href:"https://github.com/cilt-uct",children:"University of Cape Town (CILT)"})," ","for letting Duncan start the project"]}),(0,R.BX)("li",{children:[(0,R.tZ)("a",{href:"https://ethz.ch",children:"ETH Zürich"})," for financial support and testing"]}),(0,R.BX)("li",{children:[(0,R.tZ)("a",{href:"https://github.com/elan-ev",children:"ELAN e.V."})," for the re-implementation and the ongoing development"]}),(0,R.tZ)("li",{children:"And many members from the Opencast community who helped along the way."})]}),Pr.k.showLegalNotices&&(0,R.BX)(R.HY,{children:[(0,R.tZ)("h2",{children:"ELAN e.V."}),(0,R.tZ)("p",{children:"The e-learning academic network (ELAN e.V.) is a German non-profit organization supporting higher-education organizations in all matters related to e-learning. Our services include practical tips about how to use digital technologies in education, legal advice and development of free, open-source software to support education."}),(0,R.tZ)("h3",{children:"Contact"}),(0,R.BX)("p",{children:["Dr. Norbert Kleinefeld, Geschäftsführer",(0,R.tZ)("br",{}),"Karlstr. 23",(0,R.tZ)("br",{}),"D-26123 Oldenburg"]}),(0,R.BX)("p",{css:Kr,children:[(0,R.tZ)(d.RsK,{}),(0,R.tZ)("a",{href:"https://elan-ev.de",children:"elan-ev.de"}),(0,R.tZ)("br",{}),(0,R.tZ)(d.Imn,{}),(0,R.tZ)("a",{href:"mailto:kontakt@elan-ev.de",children:"kontakt@elan-ev.de"}),(0,R.tZ)("br",{}),(0,R.tZ)(d.tUt,{}),(0,R.tZ)("a",{href:"tel:+4944199866610",children:"+49 441 998 666 10"})]}),(0,R.BX)("p",{children:["Registergericht: Amtsgericht Oldenburg",(0,R.tZ)("br",{}),"Registernummer: VR 200644",(0,R.tZ)("br",{}),"USt.-ID-Nr.: DE 265901392"]})]}),(0,R.tZ)("h2",{children:"Version"}),(0,R.BX)("p",{children:["Build date ",Pr.k.buildDate??"?",", commit"," ",(0,R.tZ)("a",{"aria-label":"Git commit on GitHub",href:"https://github.com/elan-ev/opencast-studio/commit/"+Pr.k.commitSha,children:Pr.k.commitSha??"?"}),"."]})]})})},tn=()=>{const[e,t]=(0,l.useState)("none"),r=()=>t("none");Se(Ze.general.closeOverlay,r);const n="none"!==e;return(0,R.BX)("div",{css:(0,a.iv)({"--header-height":"64px",display:"flex",flexDirection:"column",height:"100%",..."none"!==e&&{overflowY:"hidden"}},"",""),children:[(0,R.tZ)(qr,{inert:n,setOverlayBoxState:t}),(0,o.EQ)(e,{none:()=>null,info:()=>(0,R.tZ)(en,{close:r}),shortcuts:()=>(0,R.tZ)(Re,{close:r})}),(0,R.tZ)(zr,{inert:n})]})};var rn={name:"4dbrlo",styles:"position:absolute;top:0;left:0;right:0;bottom:0;padding:32px 8px;z-index:800;background-color:rgba(0, 0, 0, 0.3);backdrop-filter:blur(8px);display:flex;flex-direction:column;align-items:center;@media (min-height: 400px){padding-top:calc(var(--header-height) + 32px);}"},nn={name:"1ere486",styles:"margin-bottom:8px;font-size:26px"},on={name:"1suo034",styles:"padding-right:16px;overflow-y:auto"};const sn=e=>{let{close:t,title:r,children:n,maxWidth:i}=e;const s="light"===(0,o.J1)().scheme,{isHighContrast:c}=(0,o.J1)(),u=(0,l.useRef)(null);(0,o.tF)(u,t);const p=s||c?v.DM.neutral05:v.DM.neutral15;return(0,R.tZ)("div",{role:"dialog","aria-modal":"true",css:rn,children:(0,R.BX)("div",{ref:u,css:(0,a.iv)({position:"relative",backgroundColor:p,borderRadius:8,padding:"24px 24px 32px 48px",width:"82%",flex:"0 1 auto",minHeight:0,maxWidth:i,display:"flex",flexDirection:"column",boxShadow:c?"none":"0 4px 16px var(--shadow-color))",outline:c?"2px solid var(--color-neutral90)":"none",[(0,o.xf)(850)]:{padding:24,paddingLeft:32},[(0,o.xf)(480)]:{width:"95%",padding:"12px 20px"}},"",""),children:[(0,R.tZ)(d.q5L,{onClick:t,css:(0,a.iv)({position:"absolute",top:8,right:8,backgroundColor:p,borderRadius:"50%",fontSize:40,padding:4,cursor:"pointer"},"","")}),(0,R.tZ)("h1",{css:nn,children:r}),(0,R.tZ)("div",{css:on,children:n})]})})},an=()=>(0,R.BX)(R.HY,{children:[(0,R.tZ)(a.xB,{styles:dn}),(0,R.tZ)(a.xB,{styles:ln})]}),ln={name:"1n3dtg6",styles:":root{--min-page-width:320px;}body{font-family:'Roboto Flex Variable', sans-serif;font-weight:400;line-height:1.5;font-size:16px;min-width:var(--min-page-width);}"},dn={name:"wn0kj0",styles:"*, *::before, *::after{box-sizing:border-box;}body, h1, h2, h3, h4, p, li, figure, figcaption, blockquote, dl, dd, pre{margin:0;}html, body, body > #root{height:100%;}a{text-decoration-skip-ink:auto;}input, button, textarea, select{font:inherit;margin:0;}"},cn=()=>(0,R.BX)(R.HY,{children:[(0,R.tZ)(an,{}),(0,R.tZ)(un,{}),(0,R.tZ)(o.Ag,{children:(0,R.tZ)(tn,{})})]}),un=()=>{const{recordings:e,upload:t}=(0,f.fd)(),r=e.every((e=>e.downloaded)),n="uploaded"===t.state,i="uploading"===t.state;return(0,s.x)((t=>{(e?.length>0&&!n&&!r||i)&&t.preventDefault()})),null}}}]);
//# sourceMappingURL=574.bundle.js.map